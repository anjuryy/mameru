import{g as U}from"./@babel-CiGj-Vf4.js";import{r as g}from"./react-Dtk7mQTN.js";import{L as pe,a as ht,R as gt,U as yt,B as wt,M as bt,C as Ve,b as _t,O as Et,P as Ct,S as Le,c as ve,N as Pt,A as St,W as Mt,d as Rt,e as xt,f as Ot,V as kt,g as X,h as Pe,i as Tt,T as jt,j as re,k as Lt,l as At,m as Re,n as It}from"./three-Cvr0WNh9.js";import{u as Dt}from"./react-use-measure-DBJgQo-l.js";import{F as Bt,u as Ft}from"./its-fine-cf8y2AgC.js";import{R as zt,c as Z}from"./react-reconciler-Dp89xekU.js";import{c as Ht}from"./react-dom-B94yBsr_.js";import{e as Ae}from"./maath-kMRfGsq0.js";import{u as Ut,a as Nt}from"./@react-spring-_370sSl3.js";import{u as Gt}from"./@use-gesture-Q2e-SvB-.js";import{G as xe,D as $t,M as me,O as qt,S as Wt}from"./three-stdlib-BLCfz7WA.js";import{c as Vt}from"./zustand-BJ51jWr1.js";import{s as Xt,p as Yt,c as Kt}from"./suspend-react-BKIKQNXN.js";const Jt="modulepreload",Qt=function(e){return"/build/"+e},Ie={},Gn=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){const d=document.getElementsByTagName("link"),y=document.querySelector("meta[property=csp-nonce]"),m=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));a=Promise.all(n.map(s=>{if(s=Qt(s),s in Ie)return;Ie[s]=!0;const h=s.endsWith(".css"),o=h?'[rel="stylesheet"]':"";if(!!r)for(let p=d.length-1;p>=0;p--){const f=d[p];if(f.href===s&&(!h||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":Jt,h||(u.as="script",u.crossOrigin=""),u.href=s,m&&u.setAttribute("nonce",m),document.head.appendChild(u),h)return new Promise((p,f)=>{u.addEventListener("load",p),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})}))}return a.then(()=>t()).catch(d=>{const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=d,window.dispatchEvent(y),!y.defaultPrevented)throw d})};var $n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wn(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var Xe={exports:{}},Ye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,x){var S=_.length;_.push(x);e:for(;0<S;){var j=S-1>>>1,A=_[j];if(0<a(A,x))_[j]=x,_[S]=A,S=j;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var x=_[0],S=_.pop();if(S!==x){_[0]=S;e:for(var j=0,A=_.length,I=A>>>1;j<I;){var N=2*(j+1)-1,q=_[N],V=N+1,ie=_[V];if(0>a(q,S))V<A&&0>a(ie,q)?(_[j]=ie,_[V]=S,j=V):(_[j]=q,_[N]=S,j=N);else if(V<A&&0>a(ie,S))_[j]=ie,_[V]=S,j=V;else break e}}return x}function a(_,x){var S=_.sortIndex-x.sortIndex;return S!==0?S:_.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var y=Date,m=y.now();e.unstable_now=function(){return y.now()-m}}var s=[],h=[],o=1,i=null,u=3,p=!1,f=!1,P=!1,v=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(_){for(var x=n(h);x!==null;){if(x.callback===null)r(h);else if(x.startTime<=_)r(h),x.sortIndex=x.expirationTime,t(s,x);else break;x=n(h)}}function M(_){if(P=!1,w(_),!f)if(n(s)!==null)f=!0,G(C);else{var x=n(h);x!==null&&$(M,x.startTime-_)}}function C(_,x){f=!1,P&&(P=!1,l(R),R=-1),p=!0;var S=u;try{for(w(x),i=n(s);i!==null&&(!(i.expirationTime>x)||_&&!b());){var j=i.callback;if(typeof j=="function"){i.callback=null,u=i.priorityLevel;var A=j(i.expirationTime<=x);x=e.unstable_now(),typeof A=="function"?i.callback=A:i===n(s)&&r(s),w(x)}else r(s);i=n(s)}if(i!==null)var I=!0;else{var N=n(h);N!==null&&$(M,N.startTime-x),I=!1}return I}finally{i=null,u=S,p=!1}}var E=!1,T=null,R=-1,k=5,O=-1;function b(){return!(e.unstable_now()-O<k)}function L(){if(T!==null){var _=e.unstable_now();O=_;var x=!0;try{x=T(!0,_)}finally{x?B():(E=!1,T=null)}}else E=!1}var B;if(typeof c=="function")B=function(){c(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=L,B=function(){H.postMessage(null)}}else B=function(){v(L,0)};function G(_){T=_,E||(E=!0,B())}function $(_,x){R=v(function(){_(e.unstable_now())},x)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,G(C))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(s)},e.unstable_next=function(_){switch(u){case 1:case 2:case 3:var x=3;break;default:x=u}var S=u;u=x;try{return _()}finally{u=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,x){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var S=u;u=_;try{return x()}finally{u=S}},e.unstable_scheduleCallback=function(_,x,S){var j=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?j+S:j):S=j,_){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=S+A,_={id:o++,callback:x,priorityLevel:_,startTime:S,expirationTime:A,sortIndex:-1},S>j?(_.sortIndex=S,t(h,_),n(s)===null&&_===n(h)&&(P?(l(R),R=-1):P=!0,$(M,S-j))):(_.sortIndex=A,t(s,_),f||p||(f=!0,G(C))),_},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(_){var x=u;return function(){var S=u;u=x;try{return _.apply(this,arguments)}finally{u=S}}}})(Ye);Xe.exports=Ye;var De=Xe.exports;const Oe={},Ke=e=>void Object.assign(Oe,e);function Zt(e,t){function n(o,{args:i=[],attach:u,...p},f){let P=`${o[0].toUpperCase()}${o.slice(1)}`,v;if(o==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const l=p.object;v=J(l,{type:o,root:f,attach:u,primitive:!0})}else{const l=Oe[P];if(!l)throw new Error(`R3F: ${P} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");v=J(new l(...i),{type:o,root:f,attach:u,memoizedProps:{args:i}})}return v.__r3f.attach===void 0&&(v instanceof wt?v.__r3f.attach="geometry":v instanceof bt&&(v.__r3f.attach="material")),P!=="inject"&&ye(v,p),v}function r(o,i){let u=!1;if(i){var p,f;(p=i.__r3f)!=null&&p.attach?ge(o,i,i.__r3f.attach):i.isObject3D&&o.isObject3D&&(o.add(i),u=!0),u||(f=o.__r3f)==null||f.objects.push(i),i.__r3f||J(i,{}),i.__r3f.parent=o,Me(i),Q(i)}}function a(o,i,u){let p=!1;if(i){var f,P;if((f=i.__r3f)!=null&&f.attach)ge(o,i,i.__r3f.attach);else if(i.isObject3D&&o.isObject3D){i.parent=o,i.dispatchEvent({type:"added"});const v=o.children.filter(c=>c!==i),l=v.indexOf(u);o.children=[...v.slice(0,l),i,...v.slice(l)],p=!0}p||(P=o.__r3f)==null||P.objects.push(i),i.__r3f||J(i,{}),i.__r3f.parent=o,Me(i),Q(i)}}function d(o,i,u=!1){o&&[...o].forEach(p=>y(i,p,u))}function y(o,i,u){if(i){var p,f,P;if(i.__r3f&&(i.__r3f.parent=null),(p=o.__r3f)!=null&&p.objects&&(o.__r3f.objects=o.__r3f.objects.filter(M=>M!==i)),(f=i.__r3f)!=null&&f.attach)Ue(o,i,i.__r3f.attach);else if(i.isObject3D&&o.isObject3D){var v;o.remove(i),(v=i.__r3f)!=null&&v.root&&cn(ce(i),i)}const c=(P=i.__r3f)==null?void 0:P.primitive,w=!c&&(u===void 0?i.dispose!==null:u);if(!c){var l;d((l=i.__r3f)==null?void 0:l.objects,i,w),d(i.children,i,w)}if(delete i.__r3f,w&&i.dispose&&i.type!=="Scene"){const M=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?De.unstable_scheduleCallback(De.unstable_IdlePriority,M):M()}Q(o)}}function m(o,i,u,p){var f;const P=(f=o.__r3f)==null?void 0:f.parent;if(!P)return;const v=n(i,u,o.__r3f.root);if(o.children){for(const l of o.children)l.__r3f&&r(v,l);o.children=o.children.filter(l=>!l.__r3f)}o.__r3f.objects.forEach(l=>r(v,l)),o.__r3f.objects=[],o.__r3f.autoRemovedBeforeAppend||y(P,o),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(P,v),v.raycast&&v.__r3f.eventCount&&ce(v).getState().internal.interaction.push(v),[p,p.alternate].forEach(l=>{l!==null&&(l.stateNode=v,l.ref&&(typeof l.ref=="function"?l.ref(v):l.ref.current=v))})}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:zt({createInstance:n,removeChild:y,appendChild:r,appendInitialChild:r,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(o,i)=>{if(!i)return;const u=o.getState().scene;u.__r3f&&(u.__r3f.root=o,r(u,i))},removeChildFromContainer:(o,i)=>{i&&y(o.getState().scene,i)},insertInContainerBefore:(o,i,u)=>{if(!i||!u)return;const p=o.getState().scene;p.__r3f&&a(p,i,u)},getRootHostContext:()=>null,getChildHostContext:o=>o,finalizeInitialChildren(o){var i;return!!((i=o==null?void 0:o.__r3f)!=null?i:{}).handlers},prepareUpdate(o,i,u,p){var f;if(((f=o==null?void 0:o.__r3f)!=null?f:{}).primitive&&p.object&&p.object!==o)return[!0];{const{args:v=[],children:l,...c}=p,{args:w=[],children:M,...C}=u;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((T,R)=>T!==w[R]))return[!0];const E=rt(o,c,C,!0);return E.changes.length?[!1,E]:null}},commitUpdate(o,[i,u],p,f,P,v){i?m(o,p,P,v):ye(o,u)},commitMount(o,i,u,p){var f;const P=(f=o.__r3f)!=null?f:{};o.raycast&&P.handlers&&P.eventCount&&ce(o).getState().internal.interaction.push(o)},getPublicInstance:o=>o,prepareForCommit:()=>null,preparePortalMount:o=>J(o.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(o){var i;const{attach:u,parent:p}=(i=o.__r3f)!=null?i:{};u&&p&&Ue(p,o,u),o.isObject3D&&(o.visible=!1),Q(o)},unhideInstance(o,i){var u;const{attach:p,parent:f}=(u=o.__r3f)!=null?u:{};p&&f&&ge(f,o,p),(o.isObject3D&&i.visible==null||i.visible)&&(o.visible=!0),Q(o)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>t?t():Z.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&D.fun(performance.now)?performance.now:D.fun(Date.now)?Date.now:()=>0,scheduleTimeout:D.fun(setTimeout)?setTimeout:void 0,cancelTimeout:D.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ye}}var Be,Fe;const he=e=>"colorSpace"in e||"outputColorSpace"in e,Je=()=>{var e;return(e=Oe.ColorManagement)!=null?e:null},Qe=e=>e&&e.isOrthographicCamera,en=e=>e&&e.hasOwnProperty("current"),oe=typeof window<"u"&&((Be=window.document)!=null&&Be.createElement||((Fe=window.navigator)==null?void 0:Fe.product)==="ReactNative")?g.useLayoutEffect:g.useEffect;function Ze(e){const t=g.useRef(e);return oe(()=>void(t.current=e),[e]),t}function tn({set:e}){return oe(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class et extends g.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}et.getDerivedStateFromError=()=>({error:!0});const tt="__default",ze=new Map,nn=e=>e&&!!e.memoized&&!!e.changes;function nt(e){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const te=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()};function ce(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const D={obj:e=>e===Object(e)&&!D.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:a=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(D.str(e)||D.num(e))return e===t;const d=D.obj(e);if(d&&r==="reference")return e===t;const y=D.arr(e);if(y&&n==="reference")return e===t;if((y||d)&&e===t)return!0;let m;for(m in e)if(!(m in t))return!1;if(d&&n==="shallow"&&r==="shallow"){for(m in a?t:e)if(!D.equ(e[m],t[m],{strict:a,objects:"reference"}))return!1}else for(m in a?t:e)if(e[m]!==t[m])return!1;if(D.und(m)){if(y&&e.length===0&&t.length===0||d&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function rn(e){const t={nodes:{},materials:{}};return e&&e.traverse(n=>{n.name&&(t.nodes[n.name]=n),n.material&&!t.materials[n.material.name]&&(t.materials[n.material.name]=n.material)}),t}function on(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function J(e,t){const n=e;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function Se(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),a=r.pop();return n=r.reduce((d,y)=>d[y],e),{target:n,key:a}}else return{target:n,key:t}}const He=/-\d+$/;function ge(e,t,n){if(D.str(n)){if(He.test(n)){const d=n.replace(He,""),{target:y,key:m}=Se(e,d);Array.isArray(y[m])||(y[m]=[])}const{target:r,key:a}=Se(e,n);t.__r3f.previousAttach=r[a],r[a]=t}else t.__r3f.previousAttach=n(e,t)}function Ue(e,t,n){var r,a;if(D.str(n)){const{target:d,key:y}=Se(e,n),m=t.__r3f.previousAttach;m===void 0?delete d[y]:d[y]=m}else(r=t.__r3f)==null||r.previousAttach==null||r.previousAttach(e,t);(a=t.__r3f)==null||delete a.previousAttach}function rt(e,{children:t,key:n,ref:r,...a},{children:d,key:y,ref:m,...s}={},h=!1){var o;const i=(o=e==null?void 0:e.__r3f)!=null?o:{},u=Object.entries(a),p=[];if(h){const P=Object.keys(s);for(let v=0;v<P.length;v++)a.hasOwnProperty(P[v])||u.unshift([P[v],tt+"remove"])}u.forEach(([P,v])=>{var l;if((l=e.__r3f)!=null&&l.primitive&&P==="object"||D.equ(v,s[P]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(P))return p.push([P,v,!0,[]]);let c=[];P.includes("-")&&(c=P.split("-")),p.push([P,v,!1,c]);for(const w in a){const M=a[w];w.startsWith(`${P}-`)&&p.push([w,M,!1,w.split("-")])}});const f={...a};return i.memoizedProps&&i.memoizedProps.args&&(f.args=i.memoizedProps.args),i.memoizedProps&&i.memoizedProps.attach&&(f.attach=i.memoizedProps.attach),{memoized:f,changes:p}}const sn=typeof process<"u"&&!1;function ye(e,t){var n,r,a;const d=(n=e.__r3f)!=null?n:{},y=d.root,m=(r=y==null||y.getState==null?void 0:y.getState())!=null?r:{},{memoized:s,changes:h}=nn(t)?t:rt(e,t),o=d.eventCount;e.__r3f&&(e.__r3f.memoizedProps=s);for(let u=0;u<h.length;u++){let[p,f,P,v]=h[u];if(he(e)){const M="srgb",C="srgb-linear";p==="encoding"?(p="colorSpace",f=f===3001?M:C):p==="outputEncoding"&&(p="outputColorSpace",f=f===3001?M:C)}let l=e,c=l[p];if(v.length&&(c=v.reduce((w,M)=>w[M],e),!(c&&c.set))){const[w,...M]=v.reverse();l=M.reverse().reduce((C,E)=>C[E],e),p=w}if(f===tt+"remove")if(l.constructor){let w=ze.get(l.constructor);w||(w=new l.constructor,ze.set(l.constructor,w)),f=w[p]}else f=0;if(P)f?d.handlers[p]=f:delete d.handlers[p],d.eventCount=Object.keys(d.handlers).length;else if(c&&c.set&&(c.copy||c instanceof pe)){if(Array.isArray(f))c.fromArray?c.fromArray(f):c.set(...f);else if(c.copy&&f&&f.constructor&&(sn?c.constructor.name===f.constructor.name:c.constructor===f.constructor))c.copy(f);else if(f!==void 0){const w=c instanceof Ve;!w&&c.setScalar?c.setScalar(f):c instanceof pe&&f instanceof pe?c.mask=f.mask:c.set(f),!Je()&&!m.linear&&w&&c.convertSRGBToLinear()}}else if(l[p]=f,l[p]instanceof ht&&l[p].format===gt&&l[p].type===yt){const w=l[p];he(w)&&he(m.gl)?w.colorSpace=m.gl.outputColorSpace:w.encoding=m.gl.outputEncoding}Q(e)}if(d.parent&&e.raycast&&o!==d.eventCount){const u=ce(e).getState().internal,p=u.interaction.indexOf(e);p>-1&&u.interaction.splice(p,1),d.eventCount&&u.interaction.push(e)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(a=e.__r3f)!=null&&a.parent&&Me(e),e}function Q(e){var t,n;const r=(t=e.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function Me(e){e.onUpdate==null||e.onUpdate(e)}function an(e,t){e.manual||(Qe(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function se(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function ln(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return Z.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Z.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Z.ContinuousEventPriority;default:return Z.DefaultEventPriority}}function ot(e,t,n,r){const a=n.get(t);a&&(n.delete(t),n.size===0&&(e.delete(r),a.target.releasePointerCapture(r)))}function cn(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(r=>r!==t),n.initialHits=n.initialHits.filter(r=>r!==t),n.hovered.forEach((r,a)=>{(r.eventObject===t||r.object===t)&&n.hovered.delete(a)}),n.capturedMap.forEach((r,a)=>{ot(n.capturedMap,t,r,a)})}function un(e){function t(s){const{internal:h}=e.getState(),o=s.offsetX-h.initialClick[0],i=s.offsetY-h.initialClick[1];return Math.round(Math.sqrt(o*o+i*i))}function n(s){return s.filter(h=>["Move","Over","Enter","Out","Leave"].some(o=>{var i;return(i=h.__r3f)==null?void 0:i.handlers["onPointer"+o]}))}function r(s,h){const o=e.getState(),i=new Set,u=[],p=h?h(o.internal.interaction):o.internal.interaction;for(let l=0;l<p.length;l++){const c=te(p[l]);c&&(c.raycaster.camera=void 0)}o.previousRoot||o.events.compute==null||o.events.compute(s,o);function f(l){const c=te(l);if(!c||!c.events.enabled||c.raycaster.camera===null)return[];if(c.raycaster.camera===void 0){var w;c.events.compute==null||c.events.compute(s,c,(w=c.previousRoot)==null?void 0:w.getState()),c.raycaster.camera===void 0&&(c.raycaster.camera=null)}return c.raycaster.camera?c.raycaster.intersectObject(l,!0):[]}let P=p.flatMap(f).sort((l,c)=>{const w=te(l.object),M=te(c.object);return!w||!M?l.distance-c.distance:M.events.priority-w.events.priority||l.distance-c.distance}).filter(l=>{const c=se(l);return i.has(c)?!1:(i.add(c),!0)});o.events.filter&&(P=o.events.filter(P,o));for(const l of P){let c=l.object;for(;c;){var v;(v=c.__r3f)!=null&&v.eventCount&&u.push({...l,eventObject:c}),c=c.parent}}if("pointerId"in s&&o.internal.capturedMap.has(s.pointerId))for(let l of o.internal.capturedMap.get(s.pointerId).values())i.has(se(l.intersection))||u.push(l.intersection);return u}function a(s,h,o,i){const u=e.getState();if(s.length){const p={stopped:!1};for(const f of s){const P=te(f.object)||u,{raycaster:v,pointer:l,camera:c,internal:w}=P,M=new X(l.x,l.y,0).unproject(c),C=O=>{var b,L;return(b=(L=w.capturedMap.get(O))==null?void 0:L.has(f.eventObject))!=null?b:!1},E=O=>{const b={intersection:f,target:h.target};w.capturedMap.has(O)?w.capturedMap.get(O).set(f.eventObject,b):w.capturedMap.set(O,new Map([[f.eventObject,b]])),h.target.setPointerCapture(O)},T=O=>{const b=w.capturedMap.get(O);b&&ot(w.capturedMap,f.eventObject,b,O)};let R={};for(let O in h){let b=h[O];typeof b!="function"&&(R[O]=b)}let k={...f,...R,pointer:l,intersections:s,stopped:p.stopped,delta:o,unprojectedPoint:M,ray:v.ray,camera:c,stopPropagation(){const O="pointerId"in h&&w.capturedMap.get(h.pointerId);if((!O||O.has(f.eventObject))&&(k.stopped=p.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(b=>b.eventObject===f.eventObject))){const b=s.slice(0,s.indexOf(f));d([...b,f])}},target:{hasPointerCapture:C,setPointerCapture:E,releasePointerCapture:T},currentTarget:{hasPointerCapture:C,setPointerCapture:E,releasePointerCapture:T},nativeEvent:h};if(i(k),p.stopped===!0)break}}return s}function d(s){const{internal:h}=e.getState();for(const o of h.hovered.values())if(!s.length||!s.find(i=>i.object===o.object&&i.index===o.index&&i.instanceId===o.instanceId)){const u=o.eventObject.__r3f,p=u==null?void 0:u.handlers;if(h.hovered.delete(se(o)),u!=null&&u.eventCount){const f={...o,intersections:s};p.onPointerOut==null||p.onPointerOut(f),p.onPointerLeave==null||p.onPointerLeave(f)}}}function y(s,h){for(let o=0;o<h.length;o++){const i=h[o].__r3f;i==null||i.handlers.onPointerMissed==null||i.handlers.onPointerMissed(s)}}function m(s){switch(s){case"onPointerLeave":case"onPointerCancel":return()=>d([]);case"onLostPointerCapture":return h=>{const{internal:o}=e.getState();"pointerId"in h&&o.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{o.capturedMap.has(h.pointerId)&&(o.capturedMap.delete(h.pointerId),d([]))})}}return function(o){const{onPointerMissed:i,internal:u}=e.getState();u.lastEvent.current=o;const p=s==="onPointerMove",f=s==="onClick"||s==="onContextMenu"||s==="onDoubleClick",v=r(o,p?n:void 0),l=f?t(o):0;s==="onPointerDown"&&(u.initialClick=[o.offsetX,o.offsetY],u.initialHits=v.map(w=>w.eventObject)),f&&!v.length&&l<=2&&(y(o,u.interaction),i&&i(o)),p&&d(v);function c(w){const M=w.eventObject,C=M.__r3f,E=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(p){if(E.onPointerOver||E.onPointerEnter||E.onPointerOut||E.onPointerLeave){const T=se(w),R=u.hovered.get(T);R?R.stopped&&w.stopPropagation():(u.hovered.set(T,w),E.onPointerOver==null||E.onPointerOver(w),E.onPointerEnter==null||E.onPointerEnter(w))}E.onPointerMove==null||E.onPointerMove(w)}else{const T=E[s];T?(!f||u.initialHits.includes(M))&&(y(o,u.interaction.filter(R=>!u.initialHits.includes(R))),T(w)):f&&u.initialHits.includes(M)&&y(o,u.interaction.filter(R=>!u.initialHits.includes(R)))}}a(v,o,l,c)}}return{handlePointer:m}}const it=e=>!!(e!=null&&e.render),ue=g.createContext(null),fn=(e,t)=>{const n=Vt((m,s)=>{const h=new X,o=new X,i=new X;function u(l=s().camera,c=o,w=s().size){const{width:M,height:C,top:E,left:T}=w,R=M/C;c instanceof X?i.copy(c):i.set(...c);const k=l.getWorldPosition(h).distanceTo(i);if(Qe(l))return{width:M/l.zoom,height:C/l.zoom,top:E,left:T,factor:1,distance:k,aspect:R};{const O=l.fov*Math.PI/180,b=2*Math.tan(O/2)*k,L=b*(M/C);return{width:L,height:b,top:E,left:T,factor:M/L,distance:k,aspect:R}}}let p;const f=l=>m(c=>({performance:{...c.performance,current:l}})),P=new Pe;return{set:m,get:s,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(l=1)=>e(s(),l),advance:(l,c)=>t(l,c,s()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Tt,pointer:P,mouse:P,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const l=s();p&&clearTimeout(p),l.performance.current!==l.performance.min&&f(l.performance.min),p=setTimeout(()=>f(s().performance.max),l.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:u},setEvents:l=>m(c=>({...c,events:{...c.events,...l}})),setSize:(l,c,w,M,C)=>{const E=s().camera,T={width:l,height:c,top:M||0,left:C||0,updateStyle:w};m(R=>({size:T,viewport:{...R.viewport,...u(E,o,T)}}))},setDpr:l=>m(c=>{const w=nt(l);return{viewport:{...c.viewport,dpr:w,initialDpr:c.viewport.initialDpr||w}}}),setFrameloop:(l="always")=>{const c=s().clock;c.stop(),c.elapsedTime=0,l!=="never"&&(c.start(),c.elapsedTime=0),m(()=>({frameloop:l}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:g.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(l,c,w)=>{const M=s().internal;return M.priority=M.priority+(c>0?1:0),M.subscribers.push({ref:l,priority:c,store:w}),M.subscribers=M.subscribers.sort((C,E)=>C.priority-E.priority),()=>{const C=s().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(c>0?1:0),C.subscribers=C.subscribers.filter(E=>E.ref!==l))}}}}}),r=n.getState();let a=r.size,d=r.viewport.dpr,y=r.camera;return n.subscribe(()=>{const{camera:m,size:s,viewport:h,gl:o,set:i}=n.getState();if(s.width!==a.width||s.height!==a.height||h.dpr!==d){var u;a=s,d=h.dpr,an(m,s),o.setPixelRatio(h.dpr);const p=(u=s.updateStyle)!=null?u:typeof HTMLCanvasElement<"u"&&o.domElement instanceof HTMLCanvasElement;o.setSize(s.width,s.height,p)}m!==y&&(y=m,i(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(m)}})))}),n.subscribe(m=>e(m)),n};function st(e,t){const n={callback:e};return t.add(n),()=>void t.delete(n)}let ae,at=new Set,lt=new Set,dn=new Set;const pn=e=>st(e,at),vn=e=>st(e,lt);function we(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function ne(e,t){switch(e){case"before":return we(at,t);case"after":return we(lt,t);case"tail":return we(dn,t)}}let be,_e;function Ee(e,t,n){let r=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),be=t.internal.subscribers,ae=0;ae<be.length;ae++)_e=be[ae],_e.ref.current(_e.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function mn(e){let t=!1,n,r,a;function d(s){r=requestAnimationFrame(d),t=!0,n=0,ne("before",s);for(const o of e.values()){var h;a=o.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((h=a.gl.xr)!=null&&h.isPresenting)&&(n+=Ee(s,a))}if(ne("after",s),n===0)return ne("tail",s),t=!1,cancelAnimationFrame(r)}function y(s,h=1){var o;if(!s)return e.forEach(i=>y(i.store.getState(),h));(o=s.gl.xr)!=null&&o.isPresenting||!s.internal.active||s.frameloop==="never"||(s.internal.frames=Math.min(60,s.internal.frames+h),t||(t=!0,requestAnimationFrame(d)))}function m(s,h=!0,o,i){if(h&&ne("before",s),o)Ee(s,o,i);else for(const u of e.values())Ee(s,u.store.getState());h&&ne("after",s)}return{loop:d,invalidate:y,advance:m}}function ct(){const e=g.useContext(ue);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function F(e=n=>n,t){return ct()(e,t)}function de(e,t=0){const n=ct(),r=n.getState().internal.subscribe,a=Ze(e);return oe(()=>r(a,t,n),[t,r,n]),null}const Ne=new WeakMap;function ut(e,t){return function(n,...r){let a=Ne.get(n);return a||(a=new n,Ne.set(n,a)),e&&e(a),Promise.all(r.map(d=>new Promise((y,m)=>a.load(d,s=>{s.scene&&Object.assign(s,rn(s.scene)),y(s)},t,s=>m(new Error(`Could not load ${d}: ${s==null?void 0:s.message}`)))))).finally(()=>a.dispose==null?void 0:a.dispose())}}function W(e,t,n,r){const a=Array.isArray(t)?t:[t],d=Xt(ut(n,r),[e,...a],{equal:D.equ});return Array.isArray(t)?d:d[0]}W.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return Yt(ut(n),[e,...r])};W.clear=function(e,t){const n=Array.isArray(t)?t:[t];return Kt([e,...n])};const ee=new Map,{invalidate:Ge,advance:$e}=mn(ee),{reconciler:fe,applyProps:Y}=Zt(ee,ln),K={objects:"shallow",strict:!1},hn=(e,t)=>{const n=typeof e=="function"?e(t):e;return it(n)?n:new Mt({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function gn(e,t){const n=typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement;if(t){const{width:r,height:a,top:d,left:y,updateStyle:m=n}=t;return{width:r,height:a,top:d,left:y,updateStyle:m}}else if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:r,height:a,top:d,left:y}=e.parentElement.getBoundingClientRect();return{width:r,height:a,top:d,left:y,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function yn(e){const t=ee.get(e),n=t==null?void 0:t.fiber,r=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,d=r||fn(Ge,$e),y=n||fe.createContainer(d,Z.ConcurrentRoot,null,!1,null,"",a,null);t||ee.set(e,{fiber:y,store:d});let m,s=!1,h;return{configure(o={}){let{gl:i,size:u,scene:p,events:f,onCreated:P,shadows:v=!1,linear:l=!1,flat:c=!1,legacy:w=!1,orthographic:M=!1,frameloop:C="always",dpr:E=[1,2],performance:T,raycaster:R,camera:k,onPointerMissed:O}=o,b=d.getState(),L=b.gl;b.gl||b.set({gl:L=hn(i,e)});let B=b.raycaster;B||b.set({raycaster:B=new _t});const{params:z,...H}=R||{};if(D.equ(H,B,K)||Y(B,{...H}),D.equ(z,B.params,K)||Y(B,{params:{...B.params,...z}}),!b.camera||b.camera===h&&!D.equ(h,k,K)){h=k;const S=k instanceof Rt,j=S?k:M?new Et(0,0,0,0,.1,1e3):new Ct(75,0,.1,1e3);S||(j.position.z=5,k&&Y(j,k),!b.camera&&!(k!=null&&k.rotation)&&j.lookAt(0,0,0)),b.set({camera:j}),B.camera=j}if(!b.scene){let S;p instanceof Le?S=p:(S=new Le,p&&Y(S,p)),b.set({scene:J(S)})}if(!b.xr){var G;const S=(I,N)=>{const q=d.getState();q.frameloop!=="never"&&$e(I,!0,q,N)},j=()=>{const I=d.getState();I.gl.xr.enabled=I.gl.xr.isPresenting,I.gl.xr.setAnimationLoop(I.gl.xr.isPresenting?S:null),I.gl.xr.isPresenting||Ge(I)},A={connect(){const I=d.getState().gl;I.xr.addEventListener("sessionstart",j),I.xr.addEventListener("sessionend",j)},disconnect(){const I=d.getState().gl;I.xr.removeEventListener("sessionstart",j),I.xr.removeEventListener("sessionend",j)}};typeof((G=L.xr)==null?void 0:G.addEventListener)=="function"&&A.connect(),b.set({xr:A})}if(L.shadowMap){const S=L.shadowMap.enabled,j=L.shadowMap.type;if(L.shadowMap.enabled=!!v,D.boo(v))L.shadowMap.type=ve;else if(D.str(v)){var $;const A={basic:xt,percentage:Ot,soft:ve,variance:kt};L.shadowMap.type=($=A[v])!=null?$:ve}else D.obj(v)&&Object.assign(L.shadowMap,v);(S!==L.shadowMap.enabled||j!==L.shadowMap.type)&&(L.shadowMap.needsUpdate=!0)}const _=Je();_&&("enabled"in _?_.enabled=!w:"legacyMode"in _&&(_.legacyMode=w)),s||Y(L,{outputEncoding:l?3e3:3001,toneMapping:c?Pt:St}),b.legacy!==w&&b.set(()=>({legacy:w})),b.linear!==l&&b.set(()=>({linear:l})),b.flat!==c&&b.set(()=>({flat:c})),i&&!D.fun(i)&&!it(i)&&!D.equ(i,L,K)&&Y(L,i),f&&!b.events.handlers&&b.set({events:f(d)});const x=gn(e,u);return D.equ(x,b.size,K)||b.setSize(x.width,x.height,x.updateStyle,x.top,x.left),E&&b.viewport.dpr!==nt(E)&&b.setDpr(E),b.frameloop!==C&&b.setFrameloop(C),b.onPointerMissed||b.set({onPointerMissed:O}),T&&!D.equ(T,b.performance,K)&&b.set(S=>({performance:{...S.performance,...T}})),m=P,s=!0,this},render(o){return s||this.configure(),fe.updateContainer(g.createElement(wn,{store:d,children:o,onCreated:m,rootElement:e}),y,null,()=>{}),d},unmount(){ft(e)}}}function wn({store:e,children:t,onCreated:n,rootElement:r}){return oe(()=>{const a=e.getState();a.set(d=>({internal:{...d.internal,active:!0}})),n&&n(a),e.getState().events.connected||a.events.connect==null||a.events.connect(r)},[]),g.createElement(ue.Provider,{value:e},t)}function ft(e,t){const n=ee.get(e),r=n==null?void 0:n.fiber;if(r){const a=n==null?void 0:n.store.getState();a&&(a.internal.active=!1),fe.updateContainer(null,r,null,()=>{a&&setTimeout(()=>{try{var d,y,m,s;a.events.disconnect==null||a.events.disconnect(),(d=a.gl)==null||(y=d.renderLists)==null||y.dispose==null||y.dispose(),(m=a.gl)==null||m.forceContextLoss==null||m.forceContextLoss(),(s=a.gl)!=null&&s.xr&&a.xr.disconnect(),on(a),ee.delete(e),t&&t(e)}catch{}},500)})}}fe.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:g.version});const Ce={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function bn(e){const{handlePointer:t}=un(e);return{priority:1,enabled:!0,compute(n,r,a){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Ce).reduce((n,r)=>({...n,[r]:t(r)}),{}),update:()=>{var n;const{events:r,internal:a}=e.getState();(n=a.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(a.lastEvent.current)},connect:n=>{var r;const{set:a,events:d}=e.getState();d.disconnect==null||d.disconnect(),a(y=>({events:{...y.events,connected:n}})),Object.entries((r=d.handlers)!=null?r:[]).forEach(([y,m])=>{const[s,h]=Ce[y];n.addEventListener(s,m,{passive:h})})},disconnect:()=>{const{set:n,events:r}=e.getState();if(r.connected){var a;Object.entries((a=r.handlers)!=null?a:[]).forEach(([d,y])=>{if(r&&r.connected instanceof HTMLElement){const[m]=Ce[d];r.connected.removeEventListener(m,y)}}),n(d=>({events:{...d.events,connected:void 0}}))}}}}const _n=g.forwardRef(function({children:t,fallback:n,resize:r,style:a,gl:d,events:y=bn,eventSource:m,eventPrefix:s,shadows:h,linear:o,flat:i,legacy:u,orthographic:p,frameloop:f,dpr:P,performance:v,raycaster:l,camera:c,scene:w,onPointerMissed:M,onCreated:C,...E},T){g.useMemo(()=>Ke(jt),[]);const R=Ft(),[k,O]=Dt({scroll:!0,debounce:{scroll:50,resize:0},...r}),b=g.useRef(null),L=g.useRef(null);g.useImperativeHandle(T,()=>b.current);const B=Ze(M),[z,H]=g.useState(!1),[G,$]=g.useState(!1);if(z)throw z;if(G)throw G;const _=g.useRef(null);oe(()=>{const S=b.current;O.width>0&&O.height>0&&S&&(_.current||(_.current=yn(S)),_.current.configure({gl:d,events:y,shadows:h,linear:o,flat:i,legacy:u,orthographic:p,frameloop:f,dpr:P,performance:v,raycaster:l,camera:c,scene:w,size:O,onPointerMissed:(...j)=>B.current==null?void 0:B.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(m?en(m)?m.current:m:L.current),s&&j.setEvents({compute:(A,I)=>{const N=A[s+"X"],q=A[s+"Y"];I.pointer.set(N/I.size.width*2-1,-(q/I.size.height)*2+1),I.raycaster.setFromCamera(I.pointer,I.camera)}}),C==null||C(j)}}),_.current.render(g.createElement(R,null,g.createElement(et,{set:$},g.createElement(g.Suspense,{fallback:g.createElement(tn,{set:H})},t)))))}),g.useEffect(()=>{const S=b.current;if(S)return()=>ft(S)},[]);const x=m?"none":"auto";return g.createElement("div",U({ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:x,...a}},E),g.createElement("div",{ref:k,style:{width:"100%",height:"100%"}},g.createElement("canvas",{ref:b,style:{display:"block"}},n)))}),Vn=g.forwardRef(function(t,n){return g.createElement(Bt,null,g.createElement(_n,U({},t,{ref:n})))}),ke=g.createContext(null);function dt(){return g.useContext(ke)}function Xn({eps:e=1e-5,enabled:t=!0,infinite:n,horizontal:r,pages:a=1,distance:d=1,damping:y=.25,maxSpeed:m=1/0,style:s={},children:h}){const{get:o,setEvents:i,gl:u,size:p,invalidate:f,events:P}=F(),[v]=g.useState(()=>document.createElement("div")),[l]=g.useState(()=>document.createElement("div")),[c]=g.useState(()=>document.createElement("div")),w=u.domElement.parentNode,M=g.useRef(0),C=g.useMemo(()=>({el:v,eps:e,fill:l,fixed:c,horizontal:r,damping:y,offset:0,delta:0,scroll:M,pages:a,range(R,k,O=0){const b=R-O,L=b+k+O*2;return this.offset<b?0:this.offset>L?1:(this.offset-b)/(L-b)},curve(R,k,O=0){return Math.sin(this.range(R,k,O)*Math.PI)},visible(R,k,O=0){const b=R-O,L=b+k+O*2;return this.offset>=b&&this.offset<=L}}),[e,y,r,a]);g.useEffect(()=>{v.style.position="absolute",v.style.width="100%",v.style.height="100%",v.style[r?"overflowX":"overflowY"]="auto",v.style[r?"overflowY":"overflowX"]="hidden",v.style.top="0px",v.style.left="0px";for(const k in s)v.style[k]=s[k];c.style.position="sticky",c.style.top="0px",c.style.left="0px",c.style.width="100%",c.style.height="100%",c.style.overflow="hidden",v.appendChild(c),l.style.height=r?"100%":`${a*d*100}%`,l.style.width=r?`${a*d*100}%`:"100%",l.style.pointerEvents="none",v.appendChild(l),w.appendChild(v),v[r?"scrollLeft":"scrollTop"]=1;const T=P.connected||u.domElement;requestAnimationFrame(()=>P.connect==null?void 0:P.connect(v));const R=o().events.compute;return i({compute(k,O){const{left:b,top:L}=w.getBoundingClientRect(),B=k.clientX-b,z=k.clientY-L;O.pointer.set(B/O.size.width*2-1,-(z/O.size.height)*2+1),O.raycaster.setFromCamera(O.pointer,O.camera)}}),()=>{w.removeChild(v),i({compute:R}),P.connect==null||P.connect(T)}},[a,d,r,v,l,c,w]),g.useEffect(()=>{if(P.connected===v){const T=p[r?"width":"height"],R=v[r?"scrollWidth":"scrollHeight"],k=R-T;let O=0,b=!0,L=!0;const B=()=>{if(!(!t||L)&&(f(),O=v[r?"scrollLeft":"scrollTop"],M.current=O/k,n)){if(!b){if(O>=k){const H=1-C.offset;v[r?"scrollLeft":"scrollTop"]=1,M.current=C.offset=-H,b=!0}else if(O<=0){const H=1+C.offset;v[r?"scrollLeft":"scrollTop"]=R,M.current=C.offset=H,b=!0}}b&&setTimeout(()=>b=!1,40)}};v.addEventListener("scroll",B,{passive:!0}),requestAnimationFrame(()=>L=!1);const z=H=>v.scrollLeft+=H.deltaY/2;return r&&v.addEventListener("wheel",z,{passive:!0}),()=>{v.removeEventListener("scroll",B),r&&v.removeEventListener("wheel",z)}}},[v,P,p,n,C,f,r,t]);let E=0;return de((T,R)=>{E=C.offset,Ae.damp(C,"offset",M.current,y,R,m,void 0,e),Ae.damp(C,"delta",Math.abs(E-C.offset),y,R,m,void 0,e),C.delta>e&&f()}),g.createElement(ke.Provider,{value:C},h)}const En=g.forwardRef(({children:e},t)=>{const n=g.useRef(null);g.useImperativeHandle(t,()=>n.current,[]);const r=dt(),{width:a,height:d}=F(y=>y.viewport);return de(()=>{n.current.position.x=r.horizontal?-a*(r.pages-1)*r.offset:0,n.current.position.y=r.horizontal?0:d*(r.pages-1)*r.offset}),g.createElement("group",{ref:n},e)}),Cn=g.forwardRef(({children:e,style:t,...n},r)=>{const a=dt(),d=g.useRef(null);g.useImperativeHandle(r,()=>d.current,[]);const{width:y,height:m}=F(o=>o.size),s=g.useContext(ue),h=g.useMemo(()=>Ht(a.fixed),[a.fixed]);return de(()=>{a.delta>a.eps&&(d.current.style.transform=`translate3d(${a.horizontal?-y*(a.pages-1)*a.offset:0}px,${a.horizontal?0:m*(a.pages-1)*-a.offset}px,0)`)}),h.render(g.createElement("div",U({ref:d,style:{...t,position:"absolute",top:0,left:0,willChange:"transform"}},n),g.createElement(ke.Provider,{value:a},g.createElement(ue.Provider,{value:s},e)))),null}),Yn=g.forwardRef(({html:e,...t},n)=>{const r=e?Cn:En;return g.createElement(r,U({ref:n},t))});function Kn({enabled:e=!0,snap:t,global:n,domElement:r,cursor:a=!0,children:d,speed:y=1,rotation:m=[0,0,0],zoom:s=1,polar:h=[0,Math.PI/2],azimuth:o=[-1/0,1/0],config:i={mass:1,tension:170,friction:26}}){const u=F(E=>E.events),p=F(E=>E.gl),f=r||u.connected||p.domElement,{size:P}=F(),v=g.useMemo(()=>[m[0]+h[0],m[0]+h[1]],[m[0],h[0],h[1]]),l=g.useMemo(()=>[m[1]+o[0],m[1]+o[1]],[m[1],o[0],o[1]]),c=g.useMemo(()=>[re.clamp(m[0],...v),re.clamp(m[1],...l),m[2]],[m[0],m[1],m[2],v,l]),[w,M]=Ut(()=>({scale:1,rotation:c,config:i}));g.useEffect(()=>void M.start({scale:1,rotation:c,config:i}),[c]),g.useEffect(()=>{if(n&&a&&e)return f.style.cursor="grab",p.domElement.style.cursor="",()=>{f.style.cursor="default",p.domElement.style.cursor="default"}},[n,a,f,e]);const C=Gt({onHover:({last:E})=>{a&&!n&&e&&(f.style.cursor=E?"auto":"grab")},onDrag:({down:E,delta:[T,R],memo:[k,O]=w.rotation.animation.to||c})=>{if(!e)return[R,T];a&&(f.style.cursor=E?"grabbing":"grab"),T=re.clamp(O+T/P.width*Math.PI*y,...l),R=re.clamp(k+R/P.height*Math.PI*y,...v);const b=t&&!E&&typeof t!="boolean"?t:i;return M.start({scale:E&&R>v[1]/2?s:1,rotation:t&&!E?c:[R,T,0],config:L=>L==="scale"?{...b,friction:b.friction*3}:b}),[R,T]}},{target:n?f:void 0});return g.createElement(Nt.group,U({},C==null?void 0:C(),w),d)}function Pn(e,t,n,r){const a=class extends Lt{constructor(y={}){const m=Object.entries(e);super({uniforms:m.reduce((s,[h,o])=>{const i=At.clone({[h]:{value:o}});return{...s,...i}},{}),vertexShader:t,fragmentShader:n}),this.key="",m.forEach(([s])=>Object.defineProperty(this,s,{get:()=>this.uniforms[s].value,set:h=>this.uniforms[s].value=h})),Object.assign(this,y),r&&r(this)}};return a.key=re.generateUUID(),a}const qe=e=>e===Object(e)&&!Array.isArray(e)&&typeof e!="function";function Te(e,t){const n=F(d=>d.gl),r=W(Re,qe(e)?Object.values(e):e);return g.useLayoutEffect(()=>{t==null||t(r)},[t]),g.useEffect(()=>{"initTexture"in n&&(Array.isArray(r)?r:[r]).forEach(n.initTexture)},[n,r]),g.useMemo(()=>{if(qe(e)){const d={};let y=0;for(const m in e)d[m]=r[y++];return d}else return r},[e,r])}Te.preload=e=>W.preload(Re,e);Te.clear=e=>W.clear(Re,e);const Sn=()=>parseInt(It.replace(/\D+/g,"")),Mn=Sn(),We=Pn({color:new Ve("white"),scale:new Pe(1,1),imageBounds:new Pe(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},`
  varying vec2 vUv;
  varying vec2 vPos;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
    vPos = position.xy;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  varying vec2 vPos;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform float resolution;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float radius;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  
  const float PI = 3.14159265;
    
  // from https://iquilezles.org/articles/distfunctions
  float udRoundBox( vec2 p, vec2 b, float r ) {
    return length(max(abs(p)-b+r,0.0))-r;
  }

  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);

    vec2 res = vec2(scale * resolution);
    vec2 halfRes = 0.5 * res;
    float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    
	  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);
    
    #include <tonemapping_fragment>
    #include <${Mn>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),pt=g.forwardRef(({children:e,color:t,segments:n=1,scale:r=1,zoom:a=1,grayscale:d=0,opacity:y=1,radius:m=0,texture:s,toneMapped:h,transparent:o,side:i,...u},p)=>{Ke({ImageMaterial:We});const f=g.useRef(null),P=F(w=>w.size),v=Array.isArray(r)?[r[0],r[1]]:[r,r],l=[s.image.width,s.image.height],c=Math.max(P.width,P.height);return g.useImperativeHandle(p,()=>f.current,[]),g.useLayoutEffect(()=>{f.current.geometry.parameters&&f.current.material.scale.set(v[0]*f.current.geometry.parameters.width,v[1]*f.current.geometry.parameters.height)},[]),g.createElement("mesh",U({ref:f,scale:Array.isArray(r)?[...r,1]:r},u),g.createElement("planeGeometry",{args:[1,1,n,n]}),g.createElement("imageMaterial",{color:t,map:s,zoom:a,grayscale:d,opacity:y,scale:v,imageBounds:l,resolution:c,radius:m,toneMapped:h,transparent:o,side:i,key:We.key}),e)}),Rn=g.forwardRef(({url:e,...t},n)=>{const r=Te(e);return g.createElement(pt,U({},t,{texture:r,ref:n}))}),xn=g.forwardRef(({url:e,...t},n)=>g.createElement(pt,U({},t,{ref:n}))),Qn=g.forwardRef((e,t)=>{if(e.url)return g.createElement(Rn,U({},e,{ref:t}));if(e.texture)return g.createElement(xn,U({},e,{ref:t}));throw new Error("<Image /> requires a url or texture")});let le=null,vt="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function mt(e,t,n){return r=>{n&&n(r),e&&(le||(le=new $t),le.setDecoderPath(typeof e=="string"?e:vt),r.setDRACOLoader(le)),t&&r.setMeshoptDecoder(typeof me=="function"?me():me)}}function je(e,t=!0,n=!0,r){return W(xe,e,mt(t,n,r))}je.preload=(e,t=!0,n=!0,r)=>W.preload(xe,e,mt(t,n,r));je.clear=e=>W.clear(xe,e);je.setDecoderPath=e=>{vt=e};const Zn=g.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:r,enableDamping:a=!0,keyEvents:d=!1,onChange:y,onStart:m,onEnd:s,...h},o)=>{const i=F(E=>E.invalidate),u=F(E=>E.camera),p=F(E=>E.gl),f=F(E=>E.events),P=F(E=>E.setEvents),v=F(E=>E.set),l=F(E=>E.get),c=F(E=>E.performance),w=t||u,M=r||f.connected||p.domElement,C=g.useMemo(()=>new qt(w),[w]);return de(()=>{C.enabled&&C.update()},-1),g.useEffect(()=>(d&&C.connect(d===!0?M:d),C.connect(M),()=>void C.dispose()),[d,M,n,C,i]),g.useEffect(()=>{const E=k=>{i(),n&&c.regress(),y&&y(k)},T=k=>{m&&m(k)},R=k=>{s&&s(k)};return C.addEventListener("change",E),C.addEventListener("start",T),C.addEventListener("end",R),()=>{C.removeEventListener("start",T),C.removeEventListener("end",R),C.removeEventListener("change",E)}},[y,m,s,C,i,P]),g.useEffect(()=>{if(e){const E=l().controls;return v({controls:C}),()=>v({controls:E})}},[e,C]),g.createElement("primitive",U({ref:o,object:C,enableDamping:a},h))});function er(e){const t=g.useRef(null),n=g.useRef(!1),r=g.useRef(!1),a=g.useRef(e);return g.useLayoutEffect(()=>void(a.current=e),[e]),g.useEffect(()=>{const d=t.current;if(d){const y=pn(()=>(n.current=!1,!0)),m=d.onBeforeRender;d.onBeforeRender=()=>n.current=!0;const s=vn(()=>(n.current!==r.current&&(a.current==null||a.current(r.current=n.current)),!0));return()=>{d.onBeforeRender=m,y(),s()}}},[]),t}function On(e,t,n=new X){const r=Math.PI*(e-.5),a=2*Math.PI*(t-.5);return n.x=Math.cos(a),n.y=Math.sin(r),n.z=Math.sin(a),n}const tr=g.forwardRef(({inclination:e=.6,azimuth:t=.1,distance:n=1e3,mieCoefficient:r=.005,mieDirectionalG:a=.8,rayleigh:d=.5,turbidity:y=10,sunPosition:m=On(e,t),...s},h)=>{const o=g.useMemo(()=>new X().setScalar(n),[n]),[i]=g.useState(()=>new Wt);return g.createElement("primitive",U({object:i,ref:h,"material-uniforms-mieCoefficient-value":r,"material-uniforms-mieDirectionalG-value":a,"material-uniforms-rayleigh-value":d,"material-uniforms-sunPosition-value":m,"material-uniforms-turbidity-value":y,scale:o},s))});export{Vn as C,Qn as I,Zn as O,Kn as P,tr as S,Gn as _,pn as a,Y as b,$n as c,Wn as d,Xn as e,Yn as f,qn as g,F as h,er as i,de as j,je as u};
//# sourceMappingURL=@react-three-DUMlRncB.js.map

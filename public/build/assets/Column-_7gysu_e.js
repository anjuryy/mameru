import{r as d,j as e}from"./react-uJq-X2VP.js";import P from"./AddCard-BcNkEiyg.js";import Q from"./Card-D2EgQyZr.js";import X from"./DropIndicator-BuJIL368.js";import{W as Z}from"./@inertiajs-Cx-bV3lL.js";import{D as x}from"./Dropdown-5c1RQm1i.js";import{M as tt}from"./Modal-BptD0cT6.js";import{S as et}from"./SecondaryButton-GwW6efCV.js";import{D as rt}from"./DangerButton-BCZXjkIZ.js";import ot from"./UpdateColumn-CfExwnOH.js";import"./@react-three-DCtOoYiB.js";import"./@babel-CiGj-Vf4.js";import"./three-CT44rtPH.js";import"./react-use-measure-D6pdOl5n.js";import"./debounce-BMt0QU6f.js";import"./its-fine-Au5rABnc.js";import"./react-reconciler-DzoFznAa.js";import"./react-dom-Bh-aC8ob.js";import"./scheduler-CzFDRTuY.js";import"./maath-DI14jEVk.js";import"./three-stdlib-CfCDiu8i.js";import"./zustand-BLf10dEA.js";import"./suspend-react-BKIKQNXN.js";import"./react-icons-B5xZX0wa.js";import"./framer-motion-C6D8ncF8.js";import"./axios-Di5RpEPX.js";import"./deepmerge-CLN1otEj.js";import"./qs-5apnx8Qr.js";import"./side-channel-CDpsJBz2.js";import"./get-intrinsic-B1Ut8WxJ.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-B8G-TZ45.js";import"./hasown-B9bXSDSU.js";import"./call-bind-Aj7T_c8u.js";import"./set-function-length-Ct5B6P4y.js";import"./define-data-property-CUxyvwXF.js";import"./es-define-property-28jGrh5V.js";import"./gopd-O61WwtTx.js";import"./has-property-descriptors-Cvfij9iw.js";import"./object-inspect-DABKau3O.js";import"./nprogress-ijVzWlfX.js";import"./lodash.isequal-DJh7NnHT.js";import"./TextInput-BJMORtYJ.js";import"./@headlessui-fCzVmLmW.js";import"./InputLabel-Cv5rI6c7.js";import"./PrimaryButton-RikzdkPw.js";const Xt=({title:h,headingColor:I,cards:g,column:a,setCards:j,columns:T,temp_id:m})=>{const{data:S,setData:E,delete:A,put:k,processing:_,reset:B}=Z({column:""}),[F,u]=d.useState(!1),[M,y]=d.useState(!1),[U,O]=d.useState(null),[R,D]=d.useState(!1),L=t=>{y(!0),O(t)},Y=t=>{t.preventDefault(),A(route("column.destroy",m),{preserveScroll:!0}),$(U)},$=t=>{T(r=>r.filter(s=>s.temp_id!==t))},b=()=>{y(!1),B()},z=(t,r)=>{t.dataTransfer.setData("cardId",r.id),t.dataTransfer.setData("card_id",r.card_id)},q=t=>{const r=t.dataTransfer.getData("card_id");u(!1),p();const s=f();S.column=a,t.preventDefault(),k(route("card.updateCard",r));const{element:w}=v(t,s),i=w.dataset.before||"-1";if(i!==r){let o=[...g],n=o.find(l=>l.card_id===r);if(!n)return;if(n={...n,column:a},o=o.filter(l=>l.card_id!==r),i==="-1")o.push(n);else{const l=o.findIndex(K=>K.id===i);if(l===void 0)return;o.splice(l,0,n)}j(o)}},G=t=>{t.dataTransfer.getData("cardId"),t.preventDefault(),H(t),u(!0)},p=t=>{(t||f()).forEach(s=>{s.style.opacity="0"})},H=t=>{const r=f();p(r);const s=v(t,r);s.element.style.opacity="1"},v=(t,r)=>r.reduce((i,o)=>{const n=o.getBoundingClientRect(),c=t.clientY-(n.top+50);return c<0&&c>i.offset?{offset:c,element:o}:i},{offset:Number.NEGATIVE_INFINITY,element:r[r.length-1]}),f=()=>Array.from(document.querySelectorAll(`[data-column="${a}"]`)),V=()=>{p(),u(!1)},N=g.filter(t=>t.column===a),[C,W]=d.useState(null),J=t=>{W(t.title)};return e.jsxs("div",{className:"w-56 shrink-0",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("h3",{className:`font-medium ${I} flex items-center justify-center`,children:[e.jsx("span",{children:C||h}),e.jsxs(x,{children:[e.jsx(x.Trigger,{children:e.jsx("span",{className:"inline-flex rounded-md",children:e.jsx("button",{type:"button",className:"inline-flex items-center py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-400 hover:text-gray-700 focus:outline-none transition ease-in-out duration-150 capitalize",children:e.jsx("svg",{className:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})})}),e.jsxs(x.Content,{align:"left",width:"28",children:[e.jsx("button",{className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out",onClick:()=>D(!0),children:"Edit"}),e.jsx("button",{className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out",onClick:()=>L(m),children:"Delete"})]})]})]}),e.jsx("span",{className:"rounded text-sm text-neutral-200",children:N.length})]}),e.jsxs("div",{onDrop:q,onDragOver:G,onDragLeave:V,className:`h-full w-full transition-colors ${F?"bg-neutral-800/50":"bg-neutral-800/0"}`,children:[N.map(t=>e.jsx(Q,{...t,handleDragStart:z},t.id)),e.jsx(X,{beforeId:null,column:a}),e.jsx(P,{column:a,setCards:j})]}),e.jsx(tt,{show:M,onClose:b,children:e.jsxs("form",{onSubmit:Y,className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["All the data of this column will be deleted.",e.jsx("br",{}),e.jsx("br",{}),"Are you sure you want to delete this column?"]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(et,{onClick:b,children:"No"}),e.jsx(rt,{className:"ms-3",disabled:_,children:"Yes"})]})]})}),e.jsx(ot,{showModal:R,setShowModal:D,temp_id:m,title:h,setData:E,setDataFromUpdateColumn:J})]})};export{Xt as default};
//# sourceMappingURL=Column-_7gysu_e.js.map

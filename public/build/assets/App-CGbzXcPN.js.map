{"version":3,"file":"App-CGbzXcPN.js","sources":["../../../resources/js/Pages/Fiber/App.jsx"],"sourcesContent":["import * as THREE from 'three'\r\nimport { useRef, useState } from 'react'\r\nimport { Canvas, useFrame, useThree } from '@react-three/fiber'\r\nimport { Image, ScrollControls, Scroll, useScroll, Box, PresentationControls, Sky } from '@react-three/drei'\r\nimport { proxy, useSnapshot } from 'valtio'\r\nimport { easing } from 'maath'\r\nimport Login from '../Auth/Login'\r\nimport Items from './Items'\r\n\r\nconst material = new THREE.LineBasicMaterial({ color: 'white' })\r\nconst geometry = new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0, -0.5, 0), new THREE.Vector3(0, 0.5, 0)])\r\nconst state = proxy({\r\n  clicked: null,\r\n  urls: ['./uploads/1711098941 - Copy', 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 5, 7, 8, 2, 4, 9, 6].map((u) => `/${u}.jpg`)\r\n})\r\n\r\nfunction Minimap() {\r\n  const ref = useRef()\r\n  const scroll = useScroll()\r\n  const { urls } = useSnapshot(state)\r\n  const { height } = useThree((state) => state.viewport)\r\n  useFrame((state, delta) => {\r\n    ref.current.children.forEach((child, index) => {\r\n      // Give me a value between 0 and 1\r\n      //   starting at the position of my item\r\n      //   ranging across 4 / total length\r\n      //   make it a sine, so the value goes from 0 to 1 to 0.\r\n      const y = scroll.curve(index / urls.length - 1.5 / urls.length, 4 / urls.length)\r\n      easing.damp(child.scale, 'y', 0.15 + y / 6, 0.15, delta)\r\n    })\r\n  })\r\n  return (\r\n    <group ref={ref}>\r\n      {urls.map((_, i) => (\r\n        <line key={i} geometry={geometry} material={material} position={[i * 0.06 - urls.length * 0.03, -height / 2 + 0.6, 0]} />\r\n      ))}\r\n    </group>\r\n  )\r\n}\r\n\r\nfunction Item({ index, position, scale, c = new THREE.Color(), ...props }) {\r\n  const ref = useRef()\r\n  const scroll = useScroll()\r\n  const { clicked, urls } = useSnapshot(state)\r\n  const [hovered, hover] = useState(false)\r\n  const click = () => (state.clicked = index === clicked ? null : index)\r\n  const over = () => hover(true)\r\n  const out = () => hover(false)\r\n  useFrame((state, delta) => {\r\n    const y = scroll.curve(index / urls.length - 1.5 / urls.length, 4 / urls.length)\r\n    easing.damp3(ref.current.scale, [clicked === index ? 4.7 : scale[0], clicked === index ? 5 : 4 + y, 1], 0.15, delta)\r\n    ref.current.material.scale[0] = ref.current.scale.x\r\n    ref.current.material.scale[1] = ref.current.scale.y\r\n    if (clicked !== null && index < clicked) easing.damp(ref.current.position, 'x', position[0] - 2, 0.15, delta)\r\n    if (clicked !== null && index > clicked) easing.damp(ref.current.position, 'x', position[0] + 2, 0.15, delta)\r\n    if (clicked === null || clicked === index) easing.damp(ref.current.position, 'x', position[0], 0.15, delta)\r\n    easing.damp(ref.current.material, 'grayscale', hovered || clicked === index ? 0 : Math.max(0, 1 - y), 0.15, delta)\r\n    easing.dampC(ref.current.material.color, hovered || clicked === index ? 'white' : '#aaa', hovered ? 0.3 : 0.15, delta)\r\n  })\r\n  return <Image ref={ref} {...props} position={position} scale={scale} onClick={click} onPointerOver={over} onPointerOut={out} />\r\n}\r\n\r\n// function Items({ w = 0.7, gap = 0.15 }) {\r\n//   const { urls } = useSnapshot(state)\r\n//   const { width } = useThree((state) => state.viewport)\r\n//   const xW = w + gap\r\n//   return (\r\n//     <ScrollControls horizontal damping={0.1} pages={(width - xW + urls.length * xW) / width}>\r\n//       <Minimap />\r\n//       <Scroll>\r\n//         {urls.map((url, i) => <Item key={i} index={i} position={[i * xW, 0, 0]} scale={[w, 4, 1]} url={url} />) /* prettier-ignore */}\r\n//       </Scroll>\r\n//     </ScrollControls>\r\n//   )\r\n// }\r\n\r\nexport const App = () => (\r\n    <>\r\n    <div>\r\n        <Canvas flat dpr={[1, 2]} camera={{ fov: 25, position: [0, 0, 8] }} style={{ height: '100vh' }}>\r\n            \r\n            <color attach=\"background\" args={['#FFFFFF']} />\r\n            <directionalLight\r\n              castShadow\r\n              position={ [ - 2, 2, 1 ] }\r\n              intensity={ 2 }\r\n              shadow-mapSize={ [ 1024, 1024 ] }\r\n              shadow-camera-near={ -2 }\r\n              shadow-camera-far={ 15 }\r\n              shadow-camera-top={ 10 }\r\n              shadow-camera-right={ 10 }\r\n              shadow-camera-bottom={ - 10 }\r\n              shadow-camera-left={ - 10 }\r\n          />\r\n            <ambientLight intensity={ 1.5 }/>\r\n            <PresentationControls snap global={false} zoom={0.8} rotation={[0, -Math.PI / 4, 0]} azimuth={[-Math.PI / 4, Math.PI / 4]}>\r\n              <group position-y={-0.75} dispose={null}>\r\n                {/* <Level />\r\n                <Sudo />\r\n                <Camera />\r\n                <Cactus />\r\n                <Icon />\r\n                <Pyramid /> */}\r\n                <Sky />\r\n                <Items />\r\n              </group>\r\n            </PresentationControls>\r\n        </Canvas>\r\n\r\n\r\n        {/* <Login /> */}\r\n    </div>\r\n        \r\n\r\n        \r\n    </>\r\n  \r\n)\r\n"],"names":["THREE.LineBasicMaterial","THREE.BufferGeometry","THREE.Vector3","proxy","u","App","jsx","Fragment","jsxs","Canvas","PresentationControls","Sky","Items"],"mappings":"g5CASiB,IAAIA,EAAwB,CAAE,MAAO,QAAS,EAC9C,IAAIC,IAAuB,cAAc,CAAC,IAAIC,EAAc,EAAG,IAAM,CAAC,EAAG,IAAIA,EAAc,EAAG,GAAK,CAAC,CAAC,CAAC,EACzGC,EAAM,CAClB,QAAS,KACT,KAAM,CAAC,8BAA+B,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAE,IAAKC,GAAM,IAAIA,CAAC,MAAM,CAC1H,CAAC,EA8DM,MAAMC,EAAM,IAEfC,EAAAA,IAAAC,EAAAA,SAAA,CAAA,SAAAD,EAAA,IAAC,MACG,CAAA,SAAAE,EAAAA,KAACC,EAAO,CAAA,KAAI,GAAC,IAAK,CAAC,EAAG,CAAC,EAAG,OAAQ,CAAE,IAAK,GAAI,SAAU,CAAC,EAAG,EAAG,CAAC,CAAK,EAAA,MAAO,CAAE,OAAQ,OAEjF,EAAA,SAAA,CAAAH,EAAA,IAAC,SAAM,OAAO,aAAa,KAAM,CAAC,SAAS,EAAG,EAC9CA,EAAA,IAAC,mBAAA,CACC,WAAU,GACV,SAAW,CAAE,GAAK,EAAG,CAAE,EACvB,UAAY,EACZ,iBAAiB,CAAE,KAAM,IAAK,EAC9B,qBAAqB,GACrB,oBAAoB,GACpB,oBAAoB,GACpB,sBAAsB,GACtB,uBAAuB,IACvB,qBAAqB,GAAA,CACzB,EACEA,EAAAA,IAAC,eAAa,CAAA,UAAY,GAAK,CAAA,EAC9BA,EAAA,IAAAI,EAAA,CAAqB,KAAI,GAAC,OAAQ,GAAO,KAAM,GAAK,SAAU,CAAC,EAAG,CAAC,KAAK,GAAK,EAAG,CAAC,EAAG,QAAS,CAAC,CAAC,KAAK,GAAK,EAAG,KAAK,GAAK,CAAC,EACtH,SAACF,EAAAA,KAAA,QAAA,CAAM,aAAY,KAAO,QAAS,KAOjC,SAAA,CAAAF,EAAA,IAACK,EAAI,EAAA,QACJC,EAAM,EAAA,CAAA,CAAA,CACT,CACF,CAAA,CAAA,CACJ,CAAA,CAIJ,CAAA,CAIA,CAAA"}
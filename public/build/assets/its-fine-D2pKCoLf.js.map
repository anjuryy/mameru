{"version":3,"file":"its-fine-D2pKCoLf.js","sources":["../../../node_modules/its-fine/dist/index.js"],"sourcesContent":["import * as React from \"react\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction traverseFiber(fiber, ascending, selector) {\n  if (!fiber)\n    return;\n  if (selector(fiber) === true)\n    return fiber;\n  let child = ascending ? fiber.return : fiber.child;\n  while (child) {\n    const match = traverseFiber(child, ascending, selector);\n    if (match)\n      return match;\n    child = ascending ? null : child.sibling;\n  }\n}\nfunction wrapContext(context) {\n  try {\n    return Object.defineProperties(context, {\n      _currentRenderer: {\n        get() {\n          return null;\n        },\n        set() {\n        }\n      },\n      _currentRenderer2: {\n        get() {\n          return null;\n        },\n        set() {\n        }\n      }\n    });\n  } catch (_) {\n    return context;\n  }\n}\nconst FiberContext = wrapContext(React.createContext(null));\nclass FiberProvider extends React.Component {\n  render() {\n    return /* @__PURE__ */ React.createElement(FiberContext.Provider, {\n      value: this._reactInternals\n    }, this.props.children);\n  }\n}\nconst { ReactCurrentOwner, ReactCurrentDispatcher } = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\nfunction useFiber() {\n  const root = React.useContext(FiberContext);\n  if (root === null)\n    throw new Error(\"its-fine: useFiber must be called within a <FiberProvider />!\");\n  const id = React.useId();\n  const fiber = React.useMemo(() => {\n    for (const maybeFiber of [ReactCurrentOwner == null ? void 0 : ReactCurrentOwner.current, root, root == null ? void 0 : root.alternate]) {\n      if (!maybeFiber)\n        continue;\n      const fiber2 = traverseFiber(maybeFiber, false, (node) => {\n        let state = node.memoizedState;\n        while (state) {\n          if (state.memoizedState === id)\n            return true;\n          state = state.next;\n        }\n      });\n      if (fiber2)\n        return fiber2;\n    }\n  }, [root, id]);\n  return fiber;\n}\nfunction useContainer() {\n  const fiber = useFiber();\n  const root = React.useMemo(\n    () => traverseFiber(fiber, true, (node) => {\n      var _a;\n      return ((_a = node.stateNode) == null ? void 0 : _a.containerInfo) != null;\n    }),\n    [fiber]\n  );\n  return root == null ? void 0 : root.stateNode.containerInfo;\n}\nfunction useNearestChild(type) {\n  const fiber = useFiber();\n  const childRef = React.useRef();\n  React.useLayoutEffect(() => {\n    var _a;\n    childRef.current = (_a = traverseFiber(\n      fiber,\n      false,\n      (node) => typeof node.type === \"string\" && (type === void 0 || node.type === type)\n    )) == null ? void 0 : _a.stateNode;\n  }, [fiber]);\n  return childRef;\n}\nfunction useNearestParent(type) {\n  const fiber = useFiber();\n  const parentRef = React.useRef();\n  React.useLayoutEffect(() => {\n    var _a;\n    parentRef.current = (_a = traverseFiber(\n      fiber,\n      true,\n      (node) => typeof node.type === \"string\" && (type === void 0 || node.type === type)\n    )) == null ? void 0 : _a.stateNode;\n  }, [fiber]);\n  return parentRef;\n}\nfunction useContextMap() {\n  var _a;\n  const fiber = useFiber();\n  const [contextMap] = React.useState(() => /* @__PURE__ */ new Map());\n  contextMap.clear();\n  let node = fiber;\n  while (node) {\n    if (node.type && typeof node.type === \"object\") {\n      const context = \"Provider\" in node.type ? node.type : node.type._context;\n      if (context && context !== FiberContext && !contextMap.has(context)) {\n        contextMap.set(context, (_a = ReactCurrentDispatcher == null ? void 0 : ReactCurrentDispatcher.current) == null ? void 0 : _a.readContext(wrapContext(context)));\n      }\n    }\n    node = node.return;\n  }\n  return contextMap;\n}\nfunction useContextBridge() {\n  const contextMap = useContextMap();\n  return React.useMemo(\n    () => Array.from(contextMap.keys()).reduce(\n      (Prev, context) => (props) => /* @__PURE__ */ React.createElement(Prev, null, /* @__PURE__ */ React.createElement(context.Provider, __spreadProps(__spreadValues({}, props), {\n        value: contextMap.get(context)\n      }))),\n      (props) => /* @__PURE__ */ React.createElement(FiberProvider, __spreadValues({}, props))\n    ),\n    [contextMap]\n  );\n}\nexport {\n  FiberProvider,\n  traverseFiber,\n  useContainer,\n  useContextBridge,\n  useContextMap,\n  useFiber,\n  useNearestChild,\n  useNearestParent\n};\n//# sourceMappingURL=index.js.map\n"],"names":["__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","obj","key","value","__spreadValues","a","b","prop","__spreadProps","traverseFiber","fiber","ascending","selector","child","match","wrapContext","context","FiberContext","React.createContext","FiberProvider","React.Component","React.createElement","ReactCurrentOwner","ReactCurrentDispatcher","React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","useFiber","root","React.useContext","id","React.useId","React.useMemo","maybeFiber","fiber2","node","state","useContextMap","_a","contextMap","React.useState","useContextBridge","Prev","props"],"mappings":"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","x_google_ignoreList":[0]}
import{g as U}from"./@babel-CiGj-Vf4.js";import{r as m}from"./react-DVM01ERP.js";import{L as me,T as Et,R as Ct,U as Pt,B as St,M as Mt,C as ve,a as Rt,O as xt,P as Ot,S as Ie,b as he,N as kt,A as At,W as Tt,c as jt,d as Lt,e as It,V as Dt,f as W,g as fe,h as Ft,i as zt,j as Ye,k as Bt,l as Ht,m as xe,n as Ut,o as $t}from"./three-CT44rtPH.js";import{u as Nt}from"./react-use-measure-Ct9Or_iS.js";import{F as Gt,u as qt}from"./its-fine-BvlhO9uC.js";import{R as Wt,c as Z}from"./react-reconciler-C8efrrNq.js";import{c as Vt}from"./react-dom-CfYs3vay.js";import{e as De}from"./maath-DI14jEVk.js";import{G as Oe,D as Xt,M as ge,O as Yt,S as Jt}from"./three-stdlib-CfCDiu8i.js";import{c as Kt}from"./zustand-EYJ_xzba.js";import{s as Qt,p as Zt,c as er}from"./suspend-react-BKIKQNXN.js";const tr="modulepreload",rr=function(e){return"/build/"+e},Fe={},Gr=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){const f=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),y=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=Promise.all(r.map(s=>{if(s=rr(s),s in Fe)return;Fe[s]=!0;const g=s.endsWith(".css"),o=g?'[rel="stylesheet"]':"";if(!!n)for(let p=f.length-1;p>=0;p--){const d=f[p];if(d.href===s&&(!g||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const c=document.createElement("link");if(c.rel=g?"stylesheet":tr,g||(c.as="script",c.crossOrigin=""),c.href=s,y&&c.setAttribute("nonce",y),document.head.appendChild(c),g)return new Promise((p,d)=>{c.addEventListener("load",p),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})}))}return a.then(()=>t()).catch(f=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f})};var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vr(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Je={exports:{}},Ke={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(w,R){var S=w.length;w.push(R);e:for(;0<S;){var k=S-1>>>1,L=w[k];if(0<a(L,R))w[k]=R,w[S]=L,S=k;else break e}}function r(w){return w.length===0?null:w[0]}function n(w){if(w.length===0)return null;var R=w[0],S=w.pop();if(S!==R){w[0]=S;e:for(var k=0,L=w.length,I=L>>>1;k<I;){var $=2*(k+1)-1,q=w[$],X=$+1,se=w[X];if(0>a(q,S))X<L&&0>a(se,q)?(w[k]=se,w[X]=S,k=X):(w[k]=q,w[$]=S,k=$);else if(X<L&&0>a(se,S))w[k]=se,w[X]=S,k=X;else break e}}return R}function a(w,R){var S=w.sortIndex-R.sortIndex;return S!==0?S:w.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var h=Date,y=h.now();e.unstable_now=function(){return h.now()-y}}var s=[],g=[],o=1,i=null,c=3,p=!1,d=!1,E=!1,v=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(w){for(var R=r(g);R!==null;){if(R.callback===null)n(g);else if(R.startTime<=w)n(g),R.sortIndex=R.expirationTime,t(s,R);else break;R=r(g)}}function M(w){if(E=!1,b(w),!d)if(r(s)!==null)d=!0,N(C);else{var R=r(g);R!==null&&G(M,R.startTime-w)}}function C(w,R){d=!1,E&&(E=!1,l(O),O=-1),p=!0;var S=c;try{for(b(R),i=r(s);i!==null&&(!(i.expirationTime>R)||w&&!_());){var k=i.callback;if(typeof k=="function"){i.callback=null,c=i.priorityLevel;var L=k(i.expirationTime<=R);R=e.unstable_now(),typeof L=="function"?i.callback=L:i===r(s)&&n(s),b(R)}else n(s);i=r(s)}if(i!==null)var I=!0;else{var $=r(g);$!==null&&G(M,$.startTime-R),I=!1}return I}finally{i=null,c=S,p=!1}}var P=!1,j=null,O=-1,A=5,x=-1;function _(){return!(e.unstable_now()-x<A)}function T(){if(j!==null){var w=e.unstable_now();x=w;var R=!0;try{R=j(!0,w)}finally{R?F():(P=!1,j=null)}}else P=!1}var F;if(typeof u=="function")F=function(){u(T)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=T,F=function(){H.postMessage(null)}}else F=function(){v(T,0)};function N(w){j=w,P||(P=!0,F())}function G(w,R){O=v(function(){w(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(w){w.callback=null},e.unstable_continueExecution=function(){d||p||(d=!0,N(C))},e.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<w?Math.floor(1e3/w):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_getFirstCallbackNode=function(){return r(s)},e.unstable_next=function(w){switch(c){case 1:case 2:case 3:var R=3;break;default:R=c}var S=c;c=R;try{return w()}finally{c=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(w,R){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var S=c;c=w;try{return R()}finally{c=S}},e.unstable_scheduleCallback=function(w,R,S){var k=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?k+S:k):S=k,w){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=S+L,w={id:o++,callback:R,priorityLevel:w,startTime:S,expirationTime:L,sortIndex:-1},S>k?(w.sortIndex=S,t(g,w),r(s)===null&&w===r(g)&&(E?(l(O),O=-1):E=!0,G(M,S-k))):(w.sortIndex=L,t(s,w),d||p||(d=!0,N(C))),w},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(w){var R=c;return function(){var S=c;c=R;try{return w.apply(this,arguments)}finally{c=S}}}})(Ke);Je.exports=Ke;var ze=Je.exports;const ke={},Ae=e=>void Object.assign(ke,e);function nr(e,t){function r(o,{args:i=[],attach:c,...p},d){let E=`${o[0].toUpperCase()}${o.slice(1)}`,v;if(o==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const l=p.object;v=K(l,{type:o,root:d,attach:c,primitive:!0})}else{const l=ke[E];if(!l)throw new Error(`R3F: ${E} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");v=K(new l(...i),{type:o,root:d,attach:c,memoizedProps:{args:i}})}return v.__r3f.attach===void 0&&(v instanceof St?v.__r3f.attach="geometry":v instanceof Mt&&(v.__r3f.attach="material")),E!=="inject"&&we(v,p),v}function n(o,i){let c=!1;if(i){var p,d;(p=i.__r3f)!=null&&p.attach?be(o,i,i.__r3f.attach):i.isObject3D&&o.isObject3D&&(o.add(i),c=!0),c||(d=o.__r3f)==null||d.objects.push(i),i.__r3f||K(i,{}),i.__r3f.parent=o,Re(i),Q(i)}}function a(o,i,c){let p=!1;if(i){var d,E;if((d=i.__r3f)!=null&&d.attach)be(o,i,i.__r3f.attach);else if(i.isObject3D&&o.isObject3D){i.parent=o,i.dispatchEvent({type:"added"});const v=o.children.filter(u=>u!==i),l=v.indexOf(c);o.children=[...v.slice(0,l),i,...v.slice(l)],p=!0}p||(E=o.__r3f)==null||E.objects.push(i),i.__r3f||K(i,{}),i.__r3f.parent=o,Re(i),Q(i)}}function f(o,i,c=!1){o&&[...o].forEach(p=>h(i,p,c))}function h(o,i,c){if(i){var p,d,E;if(i.__r3f&&(i.__r3f.parent=null),(p=o.__r3f)!=null&&p.objects&&(o.__r3f.objects=o.__r3f.objects.filter(M=>M!==i)),(d=i.__r3f)!=null&&d.attach)Ne(o,i,i.__r3f.attach);else if(i.isObject3D&&o.isObject3D){var v;o.remove(i),(v=i.__r3f)!=null&&v.root&&dr(ue(i),i)}const u=(E=i.__r3f)==null?void 0:E.primitive,b=!u&&(c===void 0?i.dispose!==null:c);if(!u){var l;f((l=i.__r3f)==null?void 0:l.objects,i,b),f(i.children,i,b)}if(delete i.__r3f,b&&i.dispose&&i.type!=="Scene"){const M=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ze.unstable_scheduleCallback(ze.unstable_IdlePriority,M):M()}Q(o)}}function y(o,i,c,p){var d;const E=(d=o.__r3f)==null?void 0:d.parent;if(!E)return;const v=r(i,c,o.__r3f.root);if(o.children){for(const l of o.children)l.__r3f&&n(v,l);o.children=o.children.filter(l=>!l.__r3f)}o.__r3f.objects.forEach(l=>n(v,l)),o.__r3f.objects=[],o.__r3f.autoRemovedBeforeAppend||h(E,o),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),n(E,v),v.raycast&&v.__r3f.eventCount&&ue(v).getState().internal.interaction.push(v),[p,p.alternate].forEach(l=>{l!==null&&(l.stateNode=v,l.ref&&(typeof l.ref=="function"?l.ref(v):l.ref.current=v))})}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Wt({createInstance:r,removeChild:h,appendChild:n,appendInitialChild:n,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(o,i)=>{if(!i)return;const c=o.getState().scene;c.__r3f&&(c.__r3f.root=o,n(c,i))},removeChildFromContainer:(o,i)=>{i&&h(o.getState().scene,i)},insertInContainerBefore:(o,i,c)=>{if(!i||!c)return;const p=o.getState().scene;p.__r3f&&a(p,i,c)},getRootHostContext:()=>null,getChildHostContext:o=>o,finalizeInitialChildren(o){var i;return!!((i=o==null?void 0:o.__r3f)!=null?i:{}).handlers},prepareUpdate(o,i,c,p){var d;if(((d=o==null?void 0:o.__r3f)!=null?d:{}).primitive&&p.object&&p.object!==o)return[!0];{const{args:v=[],children:l,...u}=p,{args:b=[],children:M,...C}=c;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((j,O)=>j!==b[O]))return[!0];const P=ot(o,u,C,!0);return P.changes.length?[!1,P]:null}},commitUpdate(o,[i,c],p,d,E,v){i?y(o,p,E,v):we(o,c)},commitMount(o,i,c,p){var d;const E=(d=o.__r3f)!=null?d:{};o.raycast&&E.handlers&&E.eventCount&&ue(o).getState().internal.interaction.push(o)},getPublicInstance:o=>o,prepareForCommit:()=>null,preparePortalMount:o=>K(o.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(o){var i;const{attach:c,parent:p}=(i=o.__r3f)!=null?i:{};c&&p&&Ne(p,o,c),o.isObject3D&&(o.visible=!1),Q(o)},unhideInstance(o,i){var c;const{attach:p,parent:d}=(c=o.__r3f)!=null?c:{};p&&d&&be(d,o,p),(o.isObject3D&&i.visible==null||i.visible)&&(o.visible=!0),Q(o)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>t?t():Z.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&D.fun(performance.now)?performance.now:D.fun(Date.now)?Date.now:()=>0,scheduleTimeout:D.fun(setTimeout)?setTimeout:void 0,cancelTimeout:D.fun(clearTimeout)?clearTimeout:void 0}),applyProps:we}}var Be,He;const ye=e=>"colorSpace"in e||"outputColorSpace"in e,Qe=()=>{var e;return(e=ke.ColorManagement)!=null?e:null},Ze=e=>e&&e.isOrthographicCamera,or=e=>e&&e.hasOwnProperty("current"),oe=typeof window<"u"&&((Be=window.document)!=null&&Be.createElement||((He=window.navigator)==null?void 0:He.product)==="ReactNative")?m.useLayoutEffect:m.useEffect;function et(e){const t=m.useRef(e);return oe(()=>void(t.current=e),[e]),t}function ir({set:e}){return oe(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class tt extends m.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}tt.getDerivedStateFromError=()=>({error:!0});const rt="__default",Ue=new Map,sr=e=>e&&!!e.memoized&&!!e.changes;function nt(e){var t;const r=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],r),e[1]):e}const te=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()};function ue(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const D={obj:e=>e===Object(e)&&!D.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:r="shallow",objects:n="reference",strict:a=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(D.str(e)||D.num(e))return e===t;const f=D.obj(e);if(f&&n==="reference")return e===t;const h=D.arr(e);if(h&&r==="reference")return e===t;if((h||f)&&e===t)return!0;let y;for(y in e)if(!(y in t))return!1;if(f&&r==="shallow"&&n==="shallow"){for(y in a?t:e)if(!D.equ(e[y],t[y],{strict:a,objects:"reference"}))return!1}else for(y in a?t:e)if(e[y]!==t[y])return!1;if(D.und(y)){if(h&&e.length===0&&t.length===0||f&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function ar(e){const t={nodes:{},materials:{}};return e&&e.traverse(r=>{r.name&&(t.nodes[r.name]=r),r.material&&!t.materials[r.material.name]&&(t.materials[r.material.name]=r.material)}),t}function lr(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function K(e,t){const r=e;return r.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function Me(e,t){let r=e;if(t.includes("-")){const n=t.split("-"),a=n.pop();return r=n.reduce((f,h)=>f[h],e),{target:r,key:a}}else return{target:r,key:t}}const $e=/-\d+$/;function be(e,t,r){if(D.str(r)){if($e.test(r)){const f=r.replace($e,""),{target:h,key:y}=Me(e,f);Array.isArray(h[y])||(h[y]=[])}const{target:n,key:a}=Me(e,r);t.__r3f.previousAttach=n[a],n[a]=t}else t.__r3f.previousAttach=r(e,t)}function Ne(e,t,r){var n,a;if(D.str(r)){const{target:f,key:h}=Me(e,r),y=t.__r3f.previousAttach;y===void 0?delete f[h]:f[h]=y}else(n=t.__r3f)==null||n.previousAttach==null||n.previousAttach(e,t);(a=t.__r3f)==null||delete a.previousAttach}function ot(e,{children:t,key:r,ref:n,...a},{children:f,key:h,ref:y,...s}={},g=!1){var o;const i=(o=e==null?void 0:e.__r3f)!=null?o:{},c=Object.entries(a),p=[];if(g){const E=Object.keys(s);for(let v=0;v<E.length;v++)a.hasOwnProperty(E[v])||c.unshift([E[v],rt+"remove"])}c.forEach(([E,v])=>{var l;if((l=e.__r3f)!=null&&l.primitive&&E==="object"||D.equ(v,s[E]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(E))return p.push([E,v,!0,[]]);let u=[];E.includes("-")&&(u=E.split("-")),p.push([E,v,!1,u]);for(const b in a){const M=a[b];b.startsWith(`${E}-`)&&p.push([b,M,!1,b.split("-")])}});const d={...a};return i.memoizedProps&&i.memoizedProps.args&&(d.args=i.memoizedProps.args),i.memoizedProps&&i.memoizedProps.attach&&(d.attach=i.memoizedProps.attach),{memoized:d,changes:p}}const cr=typeof process<"u"&&!1;function we(e,t){var r,n,a;const f=(r=e.__r3f)!=null?r:{},h=f.root,y=(n=h==null||h.getState==null?void 0:h.getState())!=null?n:{},{memoized:s,changes:g}=sr(t)?t:ot(e,t),o=f.eventCount;e.__r3f&&(e.__r3f.memoizedProps=s);for(let c=0;c<g.length;c++){let[p,d,E,v]=g[c];if(ye(e)){const M="srgb",C="srgb-linear";p==="encoding"?(p="colorSpace",d=d===3001?M:C):p==="outputEncoding"&&(p="outputColorSpace",d=d===3001?M:C)}let l=e,u=l[p];if(v.length&&(u=v.reduce((b,M)=>b[M],e),!(u&&u.set))){const[b,...M]=v.reverse();l=M.reverse().reduce((C,P)=>C[P],e),p=b}if(d===rt+"remove")if(l.constructor){let b=Ue.get(l.constructor);b||(b=new l.constructor,Ue.set(l.constructor,b)),d=b[p]}else d=0;if(E)d?f.handlers[p]=d:delete f.handlers[p],f.eventCount=Object.keys(f.handlers).length;else if(u&&u.set&&(u.copy||u instanceof me)){if(Array.isArray(d))u.fromArray?u.fromArray(d):u.set(...d);else if(u.copy&&d&&d.constructor&&(cr?u.constructor.name===d.constructor.name:u.constructor===d.constructor))u.copy(d);else if(d!==void 0){const b=u instanceof ve;!b&&u.setScalar?u.setScalar(d):u instanceof me&&d instanceof me?u.mask=d.mask:u.set(d),!Qe()&&!y.linear&&b&&u.convertSRGBToLinear()}}else if(l[p]=d,l[p]instanceof Et&&l[p].format===Ct&&l[p].type===Pt){const b=l[p];ye(b)&&ye(y.gl)?b.colorSpace=y.gl.outputColorSpace:b.encoding=y.gl.outputEncoding}Q(e)}if(f.parent&&e.raycast&&o!==f.eventCount){const c=ue(e).getState().internal,p=c.interaction.indexOf(e);p>-1&&c.interaction.splice(p,1),f.eventCount&&c.interaction.push(e)}return!(g.length===1&&g[0][0]==="onUpdate")&&g.length&&(a=e.__r3f)!=null&&a.parent&&Re(e),e}function Q(e){var t,r;const n=(t=e.__r3f)==null||(r=t.root)==null||r.getState==null?void 0:r.getState();n&&n.internal.frames===0&&n.invalidate()}function Re(e){e.onUpdate==null||e.onUpdate(e)}function ur(e,t){e.manual||(Ze(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function ae(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function fr(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return Z.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Z.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Z.ContinuousEventPriority;default:return Z.DefaultEventPriority}}function it(e,t,r,n){const a=r.get(t);a&&(r.delete(t),r.size===0&&(e.delete(n),a.target.releasePointerCapture(n)))}function dr(e,t){const{internal:r}=e.getState();r.interaction=r.interaction.filter(n=>n!==t),r.initialHits=r.initialHits.filter(n=>n!==t),r.hovered.forEach((n,a)=>{(n.eventObject===t||n.object===t)&&r.hovered.delete(a)}),r.capturedMap.forEach((n,a)=>{it(r.capturedMap,t,n,a)})}function pr(e){function t(s){const{internal:g}=e.getState(),o=s.offsetX-g.initialClick[0],i=s.offsetY-g.initialClick[1];return Math.round(Math.sqrt(o*o+i*i))}function r(s){return s.filter(g=>["Move","Over","Enter","Out","Leave"].some(o=>{var i;return(i=g.__r3f)==null?void 0:i.handlers["onPointer"+o]}))}function n(s,g){const o=e.getState(),i=new Set,c=[],p=g?g(o.internal.interaction):o.internal.interaction;for(let l=0;l<p.length;l++){const u=te(p[l]);u&&(u.raycaster.camera=void 0)}o.previousRoot||o.events.compute==null||o.events.compute(s,o);function d(l){const u=te(l);if(!u||!u.events.enabled||u.raycaster.camera===null)return[];if(u.raycaster.camera===void 0){var b;u.events.compute==null||u.events.compute(s,u,(b=u.previousRoot)==null?void 0:b.getState()),u.raycaster.camera===void 0&&(u.raycaster.camera=null)}return u.raycaster.camera?u.raycaster.intersectObject(l,!0):[]}let E=p.flatMap(d).sort((l,u)=>{const b=te(l.object),M=te(u.object);return!b||!M?l.distance-u.distance:M.events.priority-b.events.priority||l.distance-u.distance}).filter(l=>{const u=ae(l);return i.has(u)?!1:(i.add(u),!0)});o.events.filter&&(E=o.events.filter(E,o));for(const l of E){let u=l.object;for(;u;){var v;(v=u.__r3f)!=null&&v.eventCount&&c.push({...l,eventObject:u}),u=u.parent}}if("pointerId"in s&&o.internal.capturedMap.has(s.pointerId))for(let l of o.internal.capturedMap.get(s.pointerId).values())i.has(ae(l.intersection))||c.push(l.intersection);return c}function a(s,g,o,i){const c=e.getState();if(s.length){const p={stopped:!1};for(const d of s){const E=te(d.object)||c,{raycaster:v,pointer:l,camera:u,internal:b}=E,M=new W(l.x,l.y,0).unproject(u),C=x=>{var _,T;return(_=(T=b.capturedMap.get(x))==null?void 0:T.has(d.eventObject))!=null?_:!1},P=x=>{const _={intersection:d,target:g.target};b.capturedMap.has(x)?b.capturedMap.get(x).set(d.eventObject,_):b.capturedMap.set(x,new Map([[d.eventObject,_]])),g.target.setPointerCapture(x)},j=x=>{const _=b.capturedMap.get(x);_&&it(b.capturedMap,d.eventObject,_,x)};let O={};for(let x in g){let _=g[x];typeof _!="function"&&(O[x]=_)}let A={...d,...O,pointer:l,intersections:s,stopped:p.stopped,delta:o,unprojectedPoint:M,ray:v.ray,camera:u,stopPropagation(){const x="pointerId"in g&&b.capturedMap.get(g.pointerId);if((!x||x.has(d.eventObject))&&(A.stopped=p.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(_=>_.eventObject===d.eventObject))){const _=s.slice(0,s.indexOf(d));f([..._,d])}},target:{hasPointerCapture:C,setPointerCapture:P,releasePointerCapture:j},currentTarget:{hasPointerCapture:C,setPointerCapture:P,releasePointerCapture:j},nativeEvent:g};if(i(A),p.stopped===!0)break}}return s}function f(s){const{internal:g}=e.getState();for(const o of g.hovered.values())if(!s.length||!s.find(i=>i.object===o.object&&i.index===o.index&&i.instanceId===o.instanceId)){const c=o.eventObject.__r3f,p=c==null?void 0:c.handlers;if(g.hovered.delete(ae(o)),c!=null&&c.eventCount){const d={...o,intersections:s};p.onPointerOut==null||p.onPointerOut(d),p.onPointerLeave==null||p.onPointerLeave(d)}}}function h(s,g){for(let o=0;o<g.length;o++){const i=g[o].__r3f;i==null||i.handlers.onPointerMissed==null||i.handlers.onPointerMissed(s)}}function y(s){switch(s){case"onPointerLeave":case"onPointerCancel":return()=>f([]);case"onLostPointerCapture":return g=>{const{internal:o}=e.getState();"pointerId"in g&&o.capturedMap.has(g.pointerId)&&requestAnimationFrame(()=>{o.capturedMap.has(g.pointerId)&&(o.capturedMap.delete(g.pointerId),f([]))})}}return function(o){const{onPointerMissed:i,internal:c}=e.getState();c.lastEvent.current=o;const p=s==="onPointerMove",d=s==="onClick"||s==="onContextMenu"||s==="onDoubleClick",v=n(o,p?r:void 0),l=d?t(o):0;s==="onPointerDown"&&(c.initialClick=[o.offsetX,o.offsetY],c.initialHits=v.map(b=>b.eventObject)),d&&!v.length&&l<=2&&(h(o,c.interaction),i&&i(o)),p&&f(v);function u(b){const M=b.eventObject,C=M.__r3f,P=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(p){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const j=ae(b),O=c.hovered.get(j);O?O.stopped&&b.stopPropagation():(c.hovered.set(j,b),P.onPointerOver==null||P.onPointerOver(b),P.onPointerEnter==null||P.onPointerEnter(b))}P.onPointerMove==null||P.onPointerMove(b)}else{const j=P[s];j?(!d||c.initialHits.includes(M))&&(h(o,c.interaction.filter(O=>!c.initialHits.includes(O))),j(b)):d&&c.initialHits.includes(M)&&h(o,c.interaction.filter(O=>!c.initialHits.includes(O)))}}a(v,o,l,u)}}return{handlePointer:y}}const st=e=>!!(e!=null&&e.render),de=m.createContext(null),vr=(e,t)=>{const r=Kt((y,s)=>{const g=new W,o=new W,i=new W;function c(l=s().camera,u=o,b=s().size){const{width:M,height:C,top:P,left:j}=b,O=M/C;u instanceof W?i.copy(u):i.set(...u);const A=l.getWorldPosition(g).distanceTo(i);if(Ze(l))return{width:M/l.zoom,height:C/l.zoom,top:P,left:j,factor:1,distance:A,aspect:O};{const x=l.fov*Math.PI/180,_=2*Math.tan(x/2)*A,T=_*(M/C);return{width:T,height:_,top:P,left:j,factor:M/T,distance:A,aspect:O}}}let p;const d=l=>y(u=>({performance:{...u.performance,current:l}})),E=new fe;return{set:y,get:s,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(l=1)=>e(s(),l),advance:(l,u)=>t(l,u,s()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Ft,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const l=s();p&&clearTimeout(p),l.performance.current!==l.performance.min&&d(l.performance.min),p=setTimeout(()=>d(s().performance.max),l.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:c},setEvents:l=>y(u=>({...u,events:{...u.events,...l}})),setSize:(l,u,b,M,C)=>{const P=s().camera,j={width:l,height:u,top:M||0,left:C||0,updateStyle:b};y(O=>({size:j,viewport:{...O.viewport,...c(P,o,j)}}))},setDpr:l=>y(u=>{const b=nt(l);return{viewport:{...u.viewport,dpr:b,initialDpr:u.viewport.initialDpr||b}}}),setFrameloop:(l="always")=>{const u=s().clock;u.stop(),u.elapsedTime=0,l!=="never"&&(u.start(),u.elapsedTime=0),y(()=>({frameloop:l}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:m.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(l,u,b)=>{const M=s().internal;return M.priority=M.priority+(u>0?1:0),M.subscribers.push({ref:l,priority:u,store:b}),M.subscribers=M.subscribers.sort((C,P)=>C.priority-P.priority),()=>{const C=s().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(u>0?1:0),C.subscribers=C.subscribers.filter(P=>P.ref!==l))}}}}}),n=r.getState();let a=n.size,f=n.viewport.dpr,h=n.camera;return r.subscribe(()=>{const{camera:y,size:s,viewport:g,gl:o,set:i}=r.getState();if(s.width!==a.width||s.height!==a.height||g.dpr!==f){var c;a=s,f=g.dpr,ur(y,s),o.setPixelRatio(g.dpr);const p=(c=s.updateStyle)!=null?c:typeof HTMLCanvasElement<"u"&&o.domElement instanceof HTMLCanvasElement;o.setSize(s.width,s.height,p)}y!==h&&(h=y,i(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(y)}})))}),r.subscribe(y=>e(y)),r};function at(e,t){const r={callback:e};return t.add(r),()=>void t.delete(r)}let le,lt=new Set,ct=new Set,mr=new Set;const hr=e=>at(e,lt),gr=e=>at(e,ct);function _e(e,t){if(e.size)for(const{callback:r}of e.values())r(t)}function re(e,t){switch(e){case"before":return _e(lt,t);case"after":return _e(ct,t);case"tail":return _e(mr,t)}}let Ee,Ce;function Pe(e,t,r){let n=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(n=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),Ee=t.internal.subscribers,le=0;le<Ee.length;le++)Ce=Ee[le],Ce.ref.current(Ce.store.getState(),n,r);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function yr(e){let t=!1,r,n,a;function f(s){n=requestAnimationFrame(f),t=!0,r=0,re("before",s);for(const o of e.values()){var g;a=o.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((g=a.gl.xr)!=null&&g.isPresenting)&&(r+=Pe(s,a))}if(re("after",s),r===0)return re("tail",s),t=!1,cancelAnimationFrame(n)}function h(s,g=1){var o;if(!s)return e.forEach(i=>h(i.store.getState(),g));(o=s.gl.xr)!=null&&o.isPresenting||!s.internal.active||s.frameloop==="never"||(s.internal.frames=Math.min(60,s.internal.frames+g),t||(t=!0,requestAnimationFrame(f)))}function y(s,g=!0,o,i){if(g&&re("before",s),o)Pe(s,o,i);else for(const c of e.values())Pe(s,c.store.getState());g&&re("after",s)}return{loop:f,invalidate:h,advance:y}}function ut(){const e=m.useContext(de);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function z(e=r=>r,t){return ut()(e,t)}function ie(e,t=0){const r=ut(),n=r.getState().internal.subscribe,a=et(e);return oe(()=>n(a,t,r),[t,n,r]),null}const Ge=new WeakMap;function ft(e,t){return function(r,...n){let a=Ge.get(r);return a||(a=new r,Ge.set(r,a)),e&&e(a),Promise.all(n.map(f=>new Promise((h,y)=>a.load(f,s=>{s.scene&&Object.assign(s,ar(s.scene)),h(s)},t,s=>y(new Error(`Could not load ${f}: ${s==null?void 0:s.message}`)))))).finally(()=>a.dispose==null?void 0:a.dispose())}}function V(e,t,r,n){const a=Array.isArray(t)?t:[t],f=Qt(ft(r,n),[e,...a],{equal:D.equ});return Array.isArray(t)?f:f[0]}V.preload=function(e,t,r){const n=Array.isArray(t)?t:[t];return Zt(ft(r),[e,...n])};V.clear=function(e,t){const r=Array.isArray(t)?t:[t];return er([e,...r])};const ee=new Map,{invalidate:qe,advance:We}=yr(ee),{reconciler:pe,applyProps:Y}=nr(ee,fr),J={objects:"shallow",strict:!1},br=(e,t)=>{const r=typeof e=="function"?e(t):e;return st(r)?r:new Tt({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function wr(e,t){const r=typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement;if(t){const{width:n,height:a,top:f,left:h,updateStyle:y=r}=t;return{width:n,height:a,top:f,left:h,updateStyle:y}}else if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:n,height:a,top:f,left:h}=e.parentElement.getBoundingClientRect();return{width:n,height:a,top:f,left:h,updateStyle:r}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:r};return{width:0,height:0,top:0,left:0}}function _r(e){const t=ee.get(e),r=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,f=n||vr(qe,We),h=r||pe.createContainer(f,Z.ConcurrentRoot,null,!1,null,"",a,null);t||ee.set(e,{fiber:h,store:f});let y,s=!1,g;return{configure(o={}){let{gl:i,size:c,scene:p,events:d,onCreated:E,shadows:v=!1,linear:l=!1,flat:u=!1,legacy:b=!1,orthographic:M=!1,frameloop:C="always",dpr:P=[1,2],performance:j,raycaster:O,camera:A,onPointerMissed:x}=o,_=f.getState(),T=_.gl;_.gl||_.set({gl:T=br(i,e)});let F=_.raycaster;F||_.set({raycaster:F=new Rt});const{params:B,...H}=O||{};if(D.equ(H,F,J)||Y(F,{...H}),D.equ(B,F.params,J)||Y(F,{params:{...F.params,...B}}),!_.camera||_.camera===g&&!D.equ(g,A,J)){g=A;const S=A instanceof jt,k=S?A:M?new xt(0,0,0,0,.1,1e3):new Ot(75,0,.1,1e3);S||(k.position.z=5,A&&Y(k,A),!_.camera&&!(A!=null&&A.rotation)&&k.lookAt(0,0,0)),_.set({camera:k}),F.camera=k}if(!_.scene){let S;p instanceof Ie?S=p:(S=new Ie,p&&Y(S,p)),_.set({scene:K(S)})}if(!_.xr){var N;const S=(I,$)=>{const q=f.getState();q.frameloop!=="never"&&We(I,!0,q,$)},k=()=>{const I=f.getState();I.gl.xr.enabled=I.gl.xr.isPresenting,I.gl.xr.setAnimationLoop(I.gl.xr.isPresenting?S:null),I.gl.xr.isPresenting||qe(I)},L={connect(){const I=f.getState().gl;I.xr.addEventListener("sessionstart",k),I.xr.addEventListener("sessionend",k)},disconnect(){const I=f.getState().gl;I.xr.removeEventListener("sessionstart",k),I.xr.removeEventListener("sessionend",k)}};typeof((N=T.xr)==null?void 0:N.addEventListener)=="function"&&L.connect(),_.set({xr:L})}if(T.shadowMap){const S=T.shadowMap.enabled,k=T.shadowMap.type;if(T.shadowMap.enabled=!!v,D.boo(v))T.shadowMap.type=he;else if(D.str(v)){var G;const L={basic:Lt,percentage:It,soft:he,variance:Dt};T.shadowMap.type=(G=L[v])!=null?G:he}else D.obj(v)&&Object.assign(T.shadowMap,v);(S!==T.shadowMap.enabled||k!==T.shadowMap.type)&&(T.shadowMap.needsUpdate=!0)}const w=Qe();w&&("enabled"in w?w.enabled=!b:"legacyMode"in w&&(w.legacyMode=b)),s||Y(T,{outputEncoding:l?3e3:3001,toneMapping:u?kt:At}),_.legacy!==b&&_.set(()=>({legacy:b})),_.linear!==l&&_.set(()=>({linear:l})),_.flat!==u&&_.set(()=>({flat:u})),i&&!D.fun(i)&&!st(i)&&!D.equ(i,T,J)&&Y(T,i),d&&!_.events.handlers&&_.set({events:d(f)});const R=wr(e,c);return D.equ(R,_.size,J)||_.setSize(R.width,R.height,R.updateStyle,R.top,R.left),P&&_.viewport.dpr!==nt(P)&&_.setDpr(P),_.frameloop!==C&&_.setFrameloop(C),_.onPointerMissed||_.set({onPointerMissed:x}),j&&!D.equ(j,_.performance,J)&&_.set(S=>({performance:{...S.performance,...j}})),y=E,s=!0,this},render(o){return s||this.configure(),pe.updateContainer(m.createElement(Er,{store:f,children:o,onCreated:y,rootElement:e}),h,null,()=>{}),f},unmount(){dt(e)}}}function Er({store:e,children:t,onCreated:r,rootElement:n}){return oe(()=>{const a=e.getState();a.set(f=>({internal:{...f.internal,active:!0}})),r&&r(a),e.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),m.createElement(de.Provider,{value:e},t)}function dt(e,t){const r=ee.get(e),n=r==null?void 0:r.fiber;if(n){const a=r==null?void 0:r.store.getState();a&&(a.internal.active=!1),pe.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var f,h,y,s;a.events.disconnect==null||a.events.disconnect(),(f=a.gl)==null||(h=f.renderLists)==null||h.dispose==null||h.dispose(),(y=a.gl)==null||y.forceContextLoss==null||y.forceContextLoss(),(s=a.gl)!=null&&s.xr&&a.xr.disconnect(),lr(a),ee.delete(e),t&&t(e)}catch{}},500)})}}pe.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:m.version});const Se={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Cr(e){const{handlePointer:t}=pr(e);return{priority:1,enabled:!0,compute(r,n,a){n.pointer.set(r.offsetX/n.size.width*2-1,-(r.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(Se).reduce((r,n)=>({...r,[n]:t(n)}),{}),update:()=>{var r;const{events:n,internal:a}=e.getState();(r=a.lastEvent)!=null&&r.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:r=>{var n;const{set:a,events:f}=e.getState();f.disconnect==null||f.disconnect(),a(h=>({events:{...h.events,connected:r}})),Object.entries((n=f.handlers)!=null?n:[]).forEach(([h,y])=>{const[s,g]=Se[h];r.addEventListener(s,y,{passive:g})})},disconnect:()=>{const{set:r,events:n}=e.getState();if(n.connected){var a;Object.entries((a=n.handlers)!=null?a:[]).forEach(([f,h])=>{if(n&&n.connected instanceof HTMLElement){const[y]=Se[f];n.connected.removeEventListener(y,h)}}),r(f=>({events:{...f.events,connected:void 0}}))}}}}const Pr=m.forwardRef(function({children:t,fallback:r,resize:n,style:a,gl:f,events:h=Cr,eventSource:y,eventPrefix:s,shadows:g,linear:o,flat:i,legacy:c,orthographic:p,frameloop:d,dpr:E,performance:v,raycaster:l,camera:u,scene:b,onPointerMissed:M,onCreated:C,...P},j){m.useMemo(()=>Ae(zt),[]);const O=qt(),[A,x]=Nt({scroll:!0,debounce:{scroll:50,resize:0},...n}),_=m.useRef(null),T=m.useRef(null);m.useImperativeHandle(j,()=>_.current);const F=et(M),[B,H]=m.useState(!1),[N,G]=m.useState(!1);if(B)throw B;if(N)throw N;const w=m.useRef(null);oe(()=>{const S=_.current;x.width>0&&x.height>0&&S&&(w.current||(w.current=_r(S)),w.current.configure({gl:f,events:h,shadows:g,linear:o,flat:i,legacy:c,orthographic:p,frameloop:d,dpr:E,performance:v,raycaster:l,camera:u,scene:b,size:x,onPointerMissed:(...k)=>F.current==null?void 0:F.current(...k),onCreated:k=>{k.events.connect==null||k.events.connect(y?or(y)?y.current:y:T.current),s&&k.setEvents({compute:(L,I)=>{const $=L[s+"X"],q=L[s+"Y"];I.pointer.set($/I.size.width*2-1,-(q/I.size.height)*2+1),I.raycaster.setFromCamera(I.pointer,I.camera)}}),C==null||C(k)}}),w.current.render(m.createElement(O,null,m.createElement(tt,{set:G},m.createElement(m.Suspense,{fallback:m.createElement(ir,{set:H})},t)))))}),m.useEffect(()=>{const S=_.current;if(S)return()=>dt(S)},[]);const R=y?"none":"auto";return m.createElement("div",U({ref:T,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:R,...a}},P),m.createElement("div",{ref:A,style:{width:"100%",height:"100%"}},m.createElement("canvas",{ref:_,style:{display:"block"}},r)))}),Xr=m.forwardRef(function(t,r){return m.createElement(Gt,null,m.createElement(Pr,U({},t,{ref:r})))}),Te=m.createContext(null);function pt(){return m.useContext(Te)}function Yr({eps:e=1e-5,enabled:t=!0,infinite:r,horizontal:n,pages:a=1,distance:f=1,damping:h=.25,maxSpeed:y=1/0,style:s={},children:g}){const{get:o,setEvents:i,gl:c,size:p,invalidate:d,events:E}=z(),[v]=m.useState(()=>document.createElement("div")),[l]=m.useState(()=>document.createElement("div")),[u]=m.useState(()=>document.createElement("div")),b=c.domElement.parentNode,M=m.useRef(0),C=m.useMemo(()=>({el:v,eps:e,fill:l,fixed:u,horizontal:n,damping:h,offset:0,delta:0,scroll:M,pages:a,range(O,A,x=0){const _=O-x,T=_+A+x*2;return this.offset<_?0:this.offset>T?1:(this.offset-_)/(T-_)},curve(O,A,x=0){return Math.sin(this.range(O,A,x)*Math.PI)},visible(O,A,x=0){const _=O-x,T=_+A+x*2;return this.offset>=_&&this.offset<=T}}),[e,h,n,a]);m.useEffect(()=>{v.style.position="absolute",v.style.width="100%",v.style.height="100%",v.style[n?"overflowX":"overflowY"]="auto",v.style[n?"overflowY":"overflowX"]="hidden",v.style.top="0px",v.style.left="0px";for(const A in s)v.style[A]=s[A];u.style.position="sticky",u.style.top="0px",u.style.left="0px",u.style.width="100%",u.style.height="100%",u.style.overflow="hidden",v.appendChild(u),l.style.height=n?"100%":`${a*f*100}%`,l.style.width=n?`${a*f*100}%`:"100%",l.style.pointerEvents="none",v.appendChild(l),b.appendChild(v),v[n?"scrollLeft":"scrollTop"]=1;const j=E.connected||c.domElement;requestAnimationFrame(()=>E.connect==null?void 0:E.connect(v));const O=o().events.compute;return i({compute(A,x){const{left:_,top:T}=b.getBoundingClientRect(),F=A.clientX-_,B=A.clientY-T;x.pointer.set(F/x.size.width*2-1,-(B/x.size.height)*2+1),x.raycaster.setFromCamera(x.pointer,x.camera)}}),()=>{b.removeChild(v),i({compute:O}),E.connect==null||E.connect(j)}},[a,f,n,v,l,u,b]),m.useEffect(()=>{if(E.connected===v){const j=p[n?"width":"height"],O=v[n?"scrollWidth":"scrollHeight"],A=O-j;let x=0,_=!0,T=!0;const F=()=>{if(!(!t||T)&&(d(),x=v[n?"scrollLeft":"scrollTop"],M.current=x/A,r)){if(!_){if(x>=A){const H=1-C.offset;v[n?"scrollLeft":"scrollTop"]=1,M.current=C.offset=-H,_=!0}else if(x<=0){const H=1+C.offset;v[n?"scrollLeft":"scrollTop"]=O,M.current=C.offset=H,_=!0}}_&&setTimeout(()=>_=!1,40)}};v.addEventListener("scroll",F,{passive:!0}),requestAnimationFrame(()=>T=!1);const B=H=>v.scrollLeft+=H.deltaY/2;return n&&v.addEventListener("wheel",B,{passive:!0}),()=>{v.removeEventListener("scroll",F),n&&v.removeEventListener("wheel",B)}}},[v,E,p,r,C,d,n,t]);let P=0;return ie((j,O)=>{P=C.offset,De.damp(C,"offset",M.current,h,O,y,void 0,e),De.damp(C,"delta",Math.abs(P-C.offset),h,O,y,void 0,e),C.delta>e&&d()}),m.createElement(Te.Provider,{value:C},g)}const Sr=m.forwardRef(({children:e},t)=>{const r=m.useRef(null);m.useImperativeHandle(t,()=>r.current,[]);const n=pt(),{width:a,height:f}=z(h=>h.viewport);return ie(()=>{r.current.position.x=n.horizontal?-a*(n.pages-1)*n.offset:0,r.current.position.y=n.horizontal?0:f*(n.pages-1)*n.offset}),m.createElement("group",{ref:r},e)}),Mr=m.forwardRef(({children:e,style:t,...r},n)=>{const a=pt(),f=m.useRef(null);m.useImperativeHandle(n,()=>f.current,[]);const{width:h,height:y}=z(o=>o.size),s=m.useContext(de),g=m.useMemo(()=>Vt(a.fixed),[a.fixed]);return ie(()=>{a.delta>a.eps&&(f.current.style.transform=`translate3d(${a.horizontal?-h*(a.pages-1)*a.offset:0}px,${a.horizontal?0:y*(a.pages-1)*-a.offset}px,0)`)}),g.render(m.createElement("div",U({ref:f,style:{...t,position:"absolute",top:0,left:0,willChange:"transform"}},r),m.createElement(Te.Provider,{value:a},m.createElement(de.Provider,{value:s},e)))),null}),Jr=m.forwardRef(({html:e,...t},r)=>{const n=e?Mr:Sr;return m.createElement(n,U({ref:r},t))});function vt(e,t,r,n){const a=class extends Bt{constructor(h={}){const y=Object.entries(e);super({uniforms:y.reduce((s,[g,o])=>{const i=Ht.clone({[g]:{value:o}});return{...s,...i}},{}),vertexShader:t,fragmentShader:r}),this.key="",y.forEach(([s])=>Object.defineProperty(this,s,{get:()=>this.uniforms[s].value,set:g=>this.uniforms[s].value=g})),Object.assign(this,h),n&&n(this)}};return a.key=Ye.generateUUID(),a}const Ve=e=>e===Object(e)&&!Array.isArray(e)&&typeof e!="function";function je(e,t){const r=z(f=>f.gl),n=V(xe,Ve(e)?Object.values(e):e);return m.useLayoutEffect(()=>{t==null||t(n)},[t]),m.useEffect(()=>{"initTexture"in r&&(Array.isArray(n)?n:[n]).forEach(r.initTexture)},[r,n]),m.useMemo(()=>{if(Ve(e)){const f={};let h=0;for(const y in e)f[y]=n[h++];return f}else return n},[e,n])}je.preload=e=>V.preload(xe,e);je.clear=e=>V.clear(xe,e);const Rr=()=>parseInt(Ut.replace(/\D+/g,"")),mt=Rr(),Xe=vt({color:new ve("white"),scale:new fe(1,1),imageBounds:new fe(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},`
  varying vec2 vUv;
  varying vec2 vPos;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
    vPos = position.xy;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  varying vec2 vPos;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform float resolution;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float radius;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  
  const float PI = 3.14159265;
    
  // from https://iquilezles.org/articles/distfunctions
  float udRoundBox( vec2 p, vec2 b, float r ) {
    return length(max(abs(p)-b+r,0.0))-r;
  }

  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);

    vec2 res = vec2(scale * resolution);
    vec2 halfRes = 0.5 * res;
    float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    
	  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);
    
    #include <tonemapping_fragment>
    #include <${mt>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),ht=m.forwardRef(({children:e,color:t,segments:r=1,scale:n=1,zoom:a=1,grayscale:f=0,opacity:h=1,radius:y=0,texture:s,toneMapped:g,transparent:o,side:i,...c},p)=>{Ae({ImageMaterial:Xe});const d=m.useRef(null),E=z(b=>b.size),v=Array.isArray(n)?[n[0],n[1]]:[n,n],l=[s.image.width,s.image.height],u=Math.max(E.width,E.height);return m.useImperativeHandle(p,()=>d.current,[]),m.useLayoutEffect(()=>{d.current.geometry.parameters&&d.current.material.scale.set(v[0]*d.current.geometry.parameters.width,v[1]*d.current.geometry.parameters.height)},[]),m.createElement("mesh",U({ref:d,scale:Array.isArray(n)?[...n,1]:n},c),m.createElement("planeGeometry",{args:[1,1,r,r]}),m.createElement("imageMaterial",{color:t,map:s,zoom:a,grayscale:f,opacity:h,scale:v,imageBounds:l,resolution:u,radius:y,toneMapped:g,transparent:o,side:i,key:Xe.key}),e)}),xr=m.forwardRef(({url:e,...t},r)=>{const n=je(e);return m.createElement(ht,U({},t,{texture:n,ref:r}))}),Or=m.forwardRef(({url:e,...t},r)=>m.createElement(ht,U({},t,{ref:r}))),Qr=m.forwardRef((e,t)=>{if(e.url)return m.createElement(xr,U({},e,{ref:t}));if(e.texture)return m.createElement(Or,U({},e,{ref:t}));throw new Error("<Image /> requires a url or texture")});let ce=null,gt="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function yt(e,t,r){return n=>{r&&r(n),e&&(ce||(ce=new Xt),ce.setDecoderPath(typeof e=="string"?e:gt),n.setDRACOLoader(ce)),t&&n.setMeshoptDecoder(typeof ge=="function"?ge():ge)}}function Le(e,t=!0,r=!0,n){return V(Oe,e,yt(t,r,n))}Le.preload=(e,t=!0,r=!0,n)=>V.preload(Oe,e,yt(t,r,n));Le.clear=e=>V.clear(Oe,e);Le.setDecoderPath=e=>{gt=e};const Zr=m.forwardRef(({makeDefault:e,camera:t,regress:r,domElement:n,enableDamping:a=!0,keyEvents:f=!1,onChange:h,onStart:y,onEnd:s,...g},o)=>{const i=z(P=>P.invalidate),c=z(P=>P.camera),p=z(P=>P.gl),d=z(P=>P.events),E=z(P=>P.setEvents),v=z(P=>P.set),l=z(P=>P.get),u=z(P=>P.performance),b=t||c,M=n||d.connected||p.domElement,C=m.useMemo(()=>new Yt(b),[b]);return ie(()=>{C.enabled&&C.update()},-1),m.useEffect(()=>(f&&C.connect(f===!0?M:f),C.connect(M),()=>void C.dispose()),[f,M,r,C,i]),m.useEffect(()=>{const P=A=>{i(),r&&u.regress(),h&&h(A)},j=A=>{y&&y(A)},O=A=>{s&&s(A)};return C.addEventListener("change",P),C.addEventListener("start",j),C.addEventListener("end",O),()=>{C.removeEventListener("start",j),C.removeEventListener("end",O),C.removeEventListener("change",P)}},[h,y,s,C,i,E]),m.useEffect(()=>{if(e){const P=l().controls;return v({controls:C}),()=>v({controls:P})}},[e,C]),m.createElement("primitive",U({ref:o,object:C,enableDamping:a},g))});function en(e){const t=m.useRef(null),r=m.useRef(!1),n=m.useRef(!1),a=m.useRef(e);return m.useLayoutEffect(()=>void(a.current=e),[e]),m.useEffect(()=>{const f=t.current;if(f){const h=hr(()=>(r.current=!1,!0)),y=f.onBeforeRender;f.onBeforeRender=()=>r.current=!0;const s=gr(()=>(r.current!==n.current&&(a.current==null||a.current(n.current=r.current)),!0));return()=>{f.onBeforeRender=y,h(),s()}}},[]),t}function kr(e,t,r=new W){const n=Math.PI*(e-.5),a=2*Math.PI*(t-.5);return r.x=Math.cos(a),r.y=Math.sin(n),r.z=Math.sin(a),r}const tn=m.forwardRef(({inclination:e=.6,azimuth:t=.1,distance:r=1e3,mieCoefficient:n=.005,mieDirectionalG:a=.8,rayleigh:f=.5,turbidity:h=10,sunPosition:y=kr(e,t),...s},g)=>{const o=m.useMemo(()=>new W().setScalar(r),[r]),[i]=m.useState(()=>new Jt);return m.createElement("primitive",U({object:i,ref:g,"material-uniforms-mieCoefficient-value":n,"material-uniforms-mieDirectionalG-value":a,"material-uniforms-rayleigh-value":f,"material-uniforms-sunPosition-value":y,"material-uniforms-turbidity-value":h,scale:o},s))}),Ar=vt({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${mt>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),bt=e=>e&&e.constructor===Float32Array,Tr=e=>[e.r,e.g,e.b],wt=e=>e instanceof fe||e instanceof W||e instanceof $t,_t=e=>Array.isArray(e)?e:wt(e)?e.toArray():[e,e,e];function ne(e,t,r){return m.useMemo(()=>{if(t!==void 0){if(bt(t))return t;if(t instanceof ve){const n=Array.from({length:e*3},()=>Tr(t)).flat();return Float32Array.from(n)}else if(wt(t)||Array.isArray(t)){const n=Array.from({length:e*3},()=>_t(t)).flat();return Float32Array.from(n)}return Float32Array.from({length:e},()=>t)}return Float32Array.from({length:e},r)},[t])}const rn=m.forwardRef(({noise:e=1,count:t=100,speed:r=1,opacity:n=1,scale:a=1,size:f,color:h,children:y,...s},g)=>{m.useMemo(()=>Ae({SparklesImplMaterial:Ar}),[]);const o=m.useRef(null),i=z(b=>b.viewport.dpr),c=_t(a),p=m.useMemo(()=>Float32Array.from(Array.from({length:t},()=>c.map(Ye.randFloatSpread)).flat()),[t,...c]),d=ne(t,f,Math.random),E=ne(t,n),v=ne(t,r),l=ne(t*3,e),u=ne(h===void 0?t*3:t,bt(h)?h:new ve(h),()=>1);return ie(b=>{o.current&&o.current.material&&(o.current.material.time=b.clock.elapsedTime)}),m.useImperativeHandle(g,()=>o.current,[]),m.createElement("points",U({key:`particle-${t}-${JSON.stringify(a)}`},s,{ref:o}),m.createElement("bufferGeometry",null,m.createElement("bufferAttribute",{attach:"attributes-position",args:[p,3]}),m.createElement("bufferAttribute",{attach:"attributes-size",args:[d,1]}),m.createElement("bufferAttribute",{attach:"attributes-opacity",args:[E,1]}),m.createElement("bufferAttribute",{attach:"attributes-speed",args:[v,1]}),m.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3]}),m.createElement("bufferAttribute",{attach:"attributes-noise",args:[l,3]})),y||m.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:i,depthWrite:!1}))});export{Xr as C,Qr as I,Zr as O,rn as S,Gr as _,Vr as a,tn as b,qr as c,je as d,Yr as e,Jr as f,Wr as g,z as h,en as i,ie as j,Le as u};
//# sourceMappingURL=@react-three-CUWIX_2K.js.map
